# Options related to the vertical grid
[vertical_grid]

# the type of vertical grid
grid_type = uniform

# The type of vertical coordinate (e.g. z-level, z-star, z-tilde, sigma)
coord_type = z-tilde

# Whether to use "partial" or "full", or "None" to not alter the topography
partial_cell_type = None

# The minimum fraction of a layer for partial cells
min_pc_fraction = 0.1

# reference density defining the pseudo-height
rho0 = 1035.0


# Options related the ocean component
[ocean]
# Which model, MPAS-Ocean or Omega, is used
model = mpas-ocean

# Equation of state type, defaults to mpas-ocean default
eos_type = teos-10


# config options for two column testcases
[horiz_press_grad]

# resolutions in km (the distance between the two columns)
horiz_resolutions = [16.0, 8.0, 6.0, 4.0, 3.0, 2.0, 1.0]

# vertical resolution in m
vert_resolutions = [16.0, 8.0, 6.0, 4.0, 3.0, 2.0, 1.0]

# geometric sea surface height at the midpoint between the two columns
# and its gradient
geom_ssh_mid = 0.0
# m / km
geom_ssh_grad = 0.0

# geometric sea floor height at the midpoint between the two columns
# and its gradient
geom_z_bot_mid = -500.0
# m / km
geom_z_bot_grad = 0.0

# Pseudo-height of the bottom of the ocean (with some buffer compared with
# geometric sea floor height) at the midpoint between the two columns
# and its gradient
z_tilde_bot_mid = -576.0
# m / km
z_tilde_bot_grad = 0.0

# pseudo-height, temperatures and salinities for piecewise linear initial
# conditions at the midpoint between the two columns and their gradients
z_tilde_mid = [0.0, -48.0, -144.0, -288.0, -576.0]
# m / km
z_tilde_grad = [0.0, 0.0, 0.0, 0.0, 0.0]

temperature_mid = [22.0, 20.0, 14.0, 8.0, 5.0]
# deg C / km
temperature_grad = [0.0, 0.0, 0.0, 0.0, 0.0]

salinity_mid = [35.6, 35.4, 35.0, 34.8, 34.75]
# g/kg / km
salinity_grad = [0.0, 0.0, 0.0, 0.0, 0.0]

# number of iterations over which to allow water column adjustments
water_col_adjust_iter_count = 6


# reference solution quadrature method
reference_quadrature_method = gauss4

# reference solution's horizontal resolution in km
reference_horiz_res = 1.0

# Maximum normalized RMS difference allowed between Omega forward and
# Polaris/Python init HPGA at each resolution
omega_vs_polaris_norm_rmse_threshold = 1.0e-10

# If max(abs(Polaris/Python HPGA)) is below this floor, use absolute RMS
# threshold instead of normalized RMS for Omega-vs-Polaris validation
omega_vs_polaris_reference_scale_floor = 1.0e-12

# Maximum absolute RMS difference allowed between Omega forward and
# Polaris/Python init HPGA when using low-signal fallback
omega_vs_polaris_rms_threshold = 1.0e-12

# Maximum normalized RMS error allowed between Omega and the reference
# solution at the highest resolution
omega_vs_reference_high_res_norm_rmse_threshold = 1.0e-7

# If max(abs(reference HPGA)) is below this floor, use absolute RMS threshold
# instead of normalized RMS for highest-resolution Omega-vs-reference
# validation
omega_vs_reference_reference_scale_floor = 1.0e-12

# Maximum absolute RMS error allowed between Omega and the reference at the
# highest resolution when using low-signal fallback
omega_vs_reference_high_res_rms_threshold = 1.0e-12

# Allowed range for the Omega-vs-reference convergence slope from the
# power-law fit
omega_vs_reference_convergence_rate_min = 1.9
omega_vs_reference_convergence_rate_max = 2.1

# Maximum horizontal resolution (km) included in the power-law fit. All
# resolutions are still shown in output plots.
omega_vs_reference_convergence_fit_max_resolution = 6.0
