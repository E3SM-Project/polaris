

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>merry-go-round</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=39bb1c6d"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="nondivergent_2d" href="nondivergent_2d.html" />
    <link rel="prev" title="manufactured_solution" href="manufactured_solution.html" />
    <link href="../../../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Polaris
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User's guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../users_guide/quick_start.html">Quick Start for Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../users_guide/tasks.html">Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../users_guide/config_files.html">Config Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../users_guide/suites.html">Suites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../users_guide/mesh/index.html">Mesh component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../users_guide/ocean/index.html">Ocean component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../users_guide/seaice/index.html">Sea ice component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../users_guide/machines/index.html">Machines</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer's guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../quick_start.html">Quick Start for Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../command_line.html">Command-line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../organization/index.html">Organization of Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../e3sm/init/index.html">E3SM initial condition (e3sm/init) component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mesh/index.html">Mesh component</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Ocean component</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Tasks</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="baroclinic_channel.html">baroclinic_channel</a></li>
<li class="toctree-l3"><a class="reference internal" href="barotropic_channel.html">barotropic_channel</a></li>
<li class="toctree-l3"><a class="reference internal" href="barotropic_gyre.html">barotropic_gyre</a></li>
<li class="toctree-l3"><a class="reference internal" href="correlated_tracers_2d.html">correlated_tracers_2d</a></li>
<li class="toctree-l3"><a class="reference internal" href="cosine_bell.html">cosine_bell</a></li>
<li class="toctree-l3"><a class="reference internal" href="customizable_viz.html">customizable_viz</a></li>
<li class="toctree-l3"><a class="reference internal" href="external_gravity_wave.html">external_gravity_wave</a></li>
<li class="toctree-l3"><a class="reference internal" href="geostrophic.html">geostrophic</a></li>
<li class="toctree-l3"><a class="reference internal" href="divergent_2d.html">divergent_2d</a></li>
<li class="toctree-l3"><a class="reference internal" href="ice_shelf_2d.html">ice_shelf_2d</a></li>
<li class="toctree-l3"><a class="reference internal" href="inertial_gravity_wave.html">inertial_gravity_wave</a></li>
<li class="toctree-l3"><a class="reference internal" href="internal_wave.html">internal_wave</a></li>
<li class="toctree-l3"><a class="reference internal" href="manufactured_solution.html">manufactured_solution</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">merry-go-round</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#framework">framework</a></li>
<li class="toctree-l4"><a class="reference internal" href="#default">default</a></li>
<li class="toctree-l4"><a class="reference internal" href="#convergence-tasks">convergence tasks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="nondivergent_2d.html">nondivergent_2d</a></li>
<li class="toctree-l3"><a class="reference internal" href="overflow.html">overflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="rotation_2d.html">rotation_2d</a></li>
<li class="toctree-l3"><a class="reference internal" href="single_column.html">single_column</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../framework.html">Ocean framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../models/index.html">Models</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../seaice/index.html">Sea ice component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../framework/index.html">Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../machines/index.html">Machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docs.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../building_docs.html">Building the Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../building_docs.html#previewing-the-documentation">Previewing the Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../conda_vs_spack.html">How Conda and Spack Work Together in Polaris</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../updating_conda.html">Updating Conda Dependencies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../updating_spack/index.html">Updating Shared Spack Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../design_docs/index.html">Design Documents</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/dev_add_category_of_tasks/index.html">Developer Tutorial: Adding a New Category of Tasks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Glossary</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Polaris</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Ocean component</a></li>
          <li class="breadcrumb-item"><a href="index.html">Tasks</a></li>
      <li class="breadcrumb-item active">merry-go-round</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/developers_guide/ocean/tasks/merry_go_round.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="merry-go-round">
<span id="dev-ocean-merry-go-round"></span><h1>merry-go-round<a class="headerlink" href="#merry-go-round" title="Link to this heading"></a></h1>
<p>The merry-go-round task group is currently comprised of one <code class="docutils literal notranslate"><span class="pre">default</span></code> task for
quick testing and two convergence tests testing the convergence in space
and both space and time.</p>
<section id="framework">
<h2>framework<a class="headerlink" href="#framework" title="Link to this heading"></a></h2>
<p>The shared config options for <code class="docutils literal notranslate"><span class="pre">merry_go_round</span></code> tests  are described in
<a class="reference internal" href="../../../users_guide/ocean/tasks/merry_go_round.html#ocean-merry-go-round"><span class="std std-ref">merry-go-round</span></a> in the User’s Guide.</p>
<p>Additionally, the tests share a <code class="docutils literal notranslate"><span class="pre">forward.yaml</span></code> file with a few common model
config options related to time management, time integration, and which
tendencies terms are active, as well as defining <code class="docutils literal notranslate"><span class="pre">mesh</span></code>, <code class="docutils literal notranslate"><span class="pre">input</span></code>, <code class="docutils literal notranslate"><span class="pre">restart</span></code>,
and <code class="docutils literal notranslate"><span class="pre">output</span></code> streams.</p>
<section id="init">
<h3>init<a class="headerlink" href="#init" title="Link to this heading"></a></h3>
<p>The class <a class="reference internal" href="../generated/polaris.tasks.ocean.merry_go_round.init.Init.html#polaris.tasks.ocean.merry_go_round.init.Init" title="polaris.tasks.ocean.merry_go_round.init.Init"><code class="xref py py-class docutils literal notranslate"><span class="pre">polaris.tasks.ocean.merry_go_round.init.Init</span></code></a>
defines a step for setting up the initial state for each test case.</p>
<p>First, a mesh appropriate for the resolution is generated using
<a class="reference external" href="https://mpas-dev.github.io/MPAS-Tools/master/generated/mpas_tools.planar_hex.make_planar_hex_mesh.html#mpas_tools.planar_hex.make_planar_hex_mesh" title="(in mpas_tools vmaster)"><code class="xref py py-func docutils literal notranslate"><span class="pre">mpas_tools.planar_hex.make_planar_hex_mesh()</span></code></a>.  Then, the mesh is
culled to remove periodicity in the y direction. The uniform bottom depth and
requested number of vertical layer (default of 50) are used to define a
vertical coordinate. Next, the ocean state is generated following the
initial condition description from <a class="reference internal" href="../../../users_guide/ocean/tasks/merry_go_round.html#ocean-merry-go-round"><span class="std std-ref">merry-go-round</span></a> in the User’s
Guide.</p>
</section>
<section id="forward">
<h3>forward<a class="headerlink" href="#forward" title="Link to this heading"></a></h3>
<p>The class <a class="reference internal" href="../generated/polaris.tasks.ocean.merry_go_round.forward.Forward.html#polaris.tasks.ocean.merry_go_round.forward.Forward" title="polaris.tasks.ocean.merry_go_round.forward.Forward"><code class="xref py py-class docutils literal notranslate"><span class="pre">polaris.tasks.ocean.merry_go_round.forward.Forward</span></code></a>
defines a step for running the ocean model from the initial condition produced
in the <code class="docutils literal notranslate"><span class="pre">init</span></code> step. The time step is determined algorithmically based on
config options (i.e. <code class="docutils literal notranslate"><span class="pre">dt_per_km</span></code>) and the type of refinement requested. The
number of cells is approximated from config options in
<a class="reference internal" href="../generated/polaris.tasks.ocean.merry_go_round.forward.Forward.compute_cell_count.html#polaris.tasks.ocean.merry_go_round.forward.Forward.compute_cell_count" title="polaris.tasks.ocean.merry_go_round.forward.Forward.compute_cell_count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">polaris.tasks.ocean.merry_go_round.forward.Forward.compute_cell_count()</span></code></a>
so that this can be used to constrain the number of MPI tasks that Polaris
tasks have as their target and minimum (if the resources are not explicitly
prescribed).  For MPAS-Ocean, PIO namelist options are modified and a
graph partition is generated as part of <code class="docutils literal notranslate"><span class="pre">runtime_setup()</span></code>.  Next, the ocean
model is run. The duration is set by <code class="docutils literal notranslate"><span class="pre">run_duration</span></code> in the config section
corresponding to the task (<code class="docutils literal notranslate"><span class="pre">merry_go_round</span></code>). Finally, validation of
<code class="docutils literal notranslate"><span class="pre">normalVelocity</span></code>, <code class="docutils literal notranslate"><span class="pre">tracer1</span></code>, <code class="docutils literal notranslate"><span class="pre">tracer2</span></code>, and <code class="docutils literal notranslate"><span class="pre">tracer3</span></code> in the <code class="docutils literal notranslate"><span class="pre">output.nc</span></code>
file are performed against a baseline if one is provided when
calling <a class="reference internal" href="../../command_line.html#dev-polaris-setup"><span class="std std-ref">polaris setup</span></a>.</p>
</section>
</section>
<section id="default">
<span id="dev-ocean-merry-go-round-default"></span><h2>default<a class="headerlink" href="#default" title="Link to this heading"></a></h2>
<p>The <a class="reference internal" href="../generated/polaris.tasks.ocean.merry_go_round.default.Default.html#polaris.tasks.ocean.merry_go_round.default.Default" title="polaris.tasks.ocean.merry_go_round.default.Default"><code class="xref py py-class docutils literal notranslate"><span class="pre">polaris.tasks.ocean.merry_go_round.default.Default</span></code></a>
test runs the <code class="docutils literal notranslate"><span class="pre">init</span></code> step, the <code class="docutils literal notranslate"><span class="pre">forward</span></code> step, and a custom <code class="docutils literal notranslate"><span class="pre">viz</span></code> step.</p>
<section id="viz">
<h3>viz<a class="headerlink" href="#viz" title="Link to this heading"></a></h3>
<p>The <a class="reference internal" href="../generated/polaris.tasks.ocean.merry_go_round.default.viz.Viz.html#polaris.tasks.ocean.merry_go_round.default.viz.Viz" title="polaris.tasks.ocean.merry_go_round.default.viz.Viz"><code class="xref py py-class docutils literal notranslate"><span class="pre">polaris.tasks.ocean.merry_go_round.default.viz.Viz</span></code></a> plots
transects of the horizontal velocity, vertical velocity, simulated tracer
concentration, and error in simulated tracer concentration at the end of the
forward run. This more detailed plotting step is only available for the
default test case.</p>
</section>
</section>
<section id="convergence-tasks">
<span id="dev-ocean-merry-go-round-convergence"></span><h2>convergence tasks<a class="headerlink" href="#convergence-tasks" title="Link to this heading"></a></h2>
<section id="analysis">
<h3>analysis<a class="headerlink" href="#analysis" title="Link to this heading"></a></h3>
<p>The class <a class="reference internal" href="../generated/polaris.tasks.ocean.merry_go_round.analysis.Analysis.html#polaris.tasks.ocean.merry_go_round.analysis.Analysis" title="polaris.tasks.ocean.merry_go_round.analysis.Analysis"><code class="xref py py-class docutils literal notranslate"><span class="pre">polaris.tasks.ocean.merry_go_round.analysis.Analysis</span></code></a>
descends from <a class="reference internal" href="../generated/polaris.ocean.convergence.analysis.ConvergenceAnalysis.html#polaris.ocean.convergence.analysis.ConvergenceAnalysis" title="polaris.ocean.convergence.analysis.ConvergenceAnalysis"><code class="xref py py-class docutils literal notranslate"><span class="pre">polaris.ocean.convergence.analysis.ConvergenceAnalysis</span></code></a>
a step for computing the error from the final simulated field
and the exact solution. It uses the config options to determine whether the
convergence rate falls within acceptable bounds.</p>
</section>
<section id="id1">
<h3>viz<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<p>The class <a class="reference internal" href="../generated/polaris.tasks.ocean.merry_go_round.viz.Viz.html#polaris.tasks.ocean.merry_go_round.viz.Viz" title="polaris.tasks.ocean.merry_go_round.viz.Viz"><code class="xref py py-class docutils literal notranslate"><span class="pre">polaris.tasks.ocean.merry_go_round.viz.Viz</span></code></a>
defines a step for visualization. It produces transects of the simulated,
exact, and (simulated - exact) <code class="docutils literal notranslate"><span class="pre">tracer1</span></code> fields for each resolution.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="manufactured_solution.html" class="btn btn-neutral float-left" title="manufactured_solution" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="nondivergent_2d.html" class="btn btn-neutral float-right" title="nondivergent_2d" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Energy Exascale Earth System Model Project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
   

  <!-- Meta tags for JS to use -->
  <meta name="doc-version" content="0.9.0">
  <meta name="doc-site-root" content="../../../">

  <!-- Create version switcher container -->
  <script>
    const sidebar = document.querySelector('.wy-side-nav-search');
    if (sidebar) {
      const versionDiv = document.createElement('div');
      versionDiv.id = 'version-switcher';
      versionDiv.style.marginTop = '1em';
      sidebar.appendChild(versionDiv);
    }
  </script>

  <!-- Load version-switcher.js using the correct relative path -->
  <script src="../../../../shared/version-switcher.js"></script>


</body>
</html>