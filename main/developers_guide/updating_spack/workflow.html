

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Overview of the Workflow</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=a8da1a53"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Updating Spack Dependencies" href="updating_packages.html" />
    <link rel="prev" title="Updating Shared Spack Environments" href="index.html" />
    <link href="../../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Polaris
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User's guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../users_guide/quick_start.html">Quick Start for Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users_guide/tasks.html">Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users_guide/config_files.html">Config Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users_guide/suites.html">Suites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users_guide/mesh/index.html">Mesh component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users_guide/ocean/index.html">Ocean component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users_guide/seaice/index.html">Sea ice component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users_guide/machines/index.html">Machines</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer's guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quick_start.html">Quick Start for Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../command_line.html">Command-line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../organization/index.html">Organization of Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../e3sm/init/index.html">E3SM initial condition (e3sm/init) component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mesh/index.html">Mesh component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ocean/index.html">Ocean component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../seaice/index.html">Sea ice component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../framework/index.html">Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../machines/index.html">Machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../building_docs.html">Building the Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../building_docs.html#previewing-the-documentation">Previewing the Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conda_vs_spack.html">How Conda and Spack Work Together in Polaris</a></li>
<li class="toctree-l1"><a class="reference internal" href="../updating_conda.html">Updating Conda Dependencies</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Updating Shared Spack Environments</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Overview of the Workflow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#backgraound-how-conda-and-spack-work-together-in-polaris">Backgraound: How Conda and Spack Work Together in Polaris</a></li>
<li class="toctree-l3"><a class="reference internal" href="#updating-conda-dependencies">1. Updating Conda Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#updating-spack-dependencies">2. Updating Spack Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#deploying-and-testing-on-hpcs">4. Deploying and Testing on HPCs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adding-a-new-machine">5. Adding a New Machine</a></li>
<li class="toctree-l3"><a class="reference internal" href="#deploying-the-shared-spack-environments">6. Deploying the Shared Spack Environments</a></li>
<li class="toctree-l3"><a class="reference internal" href="#maintaining-past-versions">7. Maintaining Past Versions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="updating_packages.html">Updating Spack Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing/index.html">Deployment and Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="adding_new_machines.html">Adding a New Machine</a></li>
<li class="toctree-l2"><a class="reference internal" href="deploying_shared_spack.html">Deploying the Final Shared Spack Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="maintaining_past_versions.html">Maintaining Past Versions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../design_docs/index.html">Design Documents</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/dev_add_test_group.html">Developer Tutorial: Adding a new test group</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Glossary</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Polaris</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Updating Shared Spack Environments</a></li>
      <li class="breadcrumb-item active">Overview of the Workflow</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/developers_guide/updating_spack/workflow.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="overview-of-the-workflow">
<h1>Overview of the Workflow<a class="headerlink" href="#overview-of-the-workflow" title="Link to this heading">ïƒ</a></h1>
<p>The Polaris workflow for updating shared Spack environments typically follows
this progression:</p>
<ol class="arabic simple">
<li><p><strong><a class="reference internal" href="../updating_conda.html"><span class="std std-doc">Updating Conda Dependencies</span></a></strong></p></li>
<li><p><strong><a class="reference internal" href="updating_packages.html"><span class="std std-doc">Updating Spack Dependencies</span></a></strong></p></li>
<li><p><strong><a class="reference internal" href="testing/overview.html"><span class="std std-doc">Deployment and Testing</span></a></strong></p></li>
<li><p><strong><a class="reference internal" href="adding_new_machines.html"><span class="std std-doc">Adding a New Machine</span></a></strong></p></li>
<li><p><strong><a class="reference internal" href="deploying_shared_spack.html"><span class="std std-doc">Deploying the New Versione</span></a></strong></p></li>
<li><p><strong><a class="reference internal" href="maintaining_past_versions.html"><span class="std std-doc">Maintaining Past Versions</span></a></strong></p></li>
</ol>
<p>We begin with some background information, then each of these steps is detailed
in its own page. See below for a high-level summary.</p>
<hr class="docutils" />
<section id="backgraound-how-conda-and-spack-work-together-in-polaris">
<h2>Backgraound: How Conda and Spack Work Together in Polaris<a class="headerlink" href="#backgraound-how-conda-and-spack-work-together-in-polaris" title="Link to this heading">ïƒ</a></h2>
<p>Why does Polaris use both Conda and Spack? What roles do they each serve?
Before you start, itâ€™s critical to understand how these two systems work
together.</p>
<p>ğŸ”— <a class="reference internal" href="../conda_vs_spack.html"><span class="std std-doc">Read more</span></a></p>
</section>
<hr class="docutils" />
<section id="updating-conda-dependencies">
<h2>1. Updating Conda Dependencies<a class="headerlink" href="#updating-conda-dependencies" title="Link to this heading">ïƒ</a></h2>
<p>Frequently, developers need to updating Conda dependencies at the same time
that they are updating shared Spack environments. In such cases, follow the
same process you would if you were just updating Conda dependencies but there
is no need to bump the <code class="docutils literal notranslate"><span class="pre">alpha</span></code> version or make a separate PR for those changes.</p>
<p>ğŸ”— <a class="reference internal" href="../updating_conda.html"><span class="std std-doc">Read more</span></a></p>
</section>
<hr class="docutils" />
<section id="updating-spack-dependencies">
<h2>2. Updating Spack Dependencies<a class="headerlink" href="#updating-spack-dependencies" title="Link to this heading">ïƒ</a></h2>
<p>Updates to shared Spack environments typcially occur when Polaris needs to
support new Spack dependencies (e.g. a new MPI-base library or tool) or when
new  versions of existing Spack dependencies are required.  Sometimes, new
shared Spack environments are required because system modules have changed
(particularly if modules currently used by Polaris are no longer available).
This step documents how to propose new Spack dependencies or changes to
existing ones.</p>
<p>ğŸ”— <a class="reference internal" href="updating_packages.html"><span class="std std-doc">Read more</span></a></p>
</section>
<hr class="docutils" />
<section id="deploying-and-testing-on-hpcs">
<h2>4. Deploying and Testing on HPCs<a class="headerlink" href="#deploying-and-testing-on-hpcs" title="Link to this heading">ïƒ</a></h2>
<p>Before full deployment, new versions of Polaris are installed on a subset of
HPC platforms for iterative testing and validation. This stage often requires
updating updating <code class="docutils literal notranslate"><span class="pre">mache</span></code> to support new systems or changes in machine
configurations, adding package versions to E3SMâ€™s Spack fork, and
troubleshooting deployment scripts.</p>
<p>Testing includes everything from basic imports to full workflow runs.</p>
<p>ğŸ”— <a class="reference internal" href="testing/overview.html"><span class="std std-doc">Read more</span></a></p>
</section>
<hr class="docutils" />
<section id="adding-a-new-machine">
<h2>5. Adding a New Machine<a class="headerlink" href="#adding-a-new-machine" title="Link to this heading">ïƒ</a></h2>
<p>Most of the work for adding a new machine takes place in <code class="docutils literal notranslate"><span class="pre">mache</span></code>. Here we
provide notes on adding new HPCs that are specific to Polaris.</p>
<p>ğŸ”— <a class="reference internal" href="adding_new_machines.html"><span class="std std-doc">Read more</span></a></p>
</section>
<hr class="docutils" />
<section id="deploying-the-shared-spack-environments">
<h2>6. Deploying the Shared Spack Environments<a class="headerlink" href="#deploying-the-shared-spack-environments" title="Link to this heading">ïƒ</a></h2>
<p>Once test deployments have been made and the rquired test suites are passing:</p>
<ul class="simple">
<li><p>Deploy across all supported HPC machines</p></li>
<li><p>Merge the version-update PR</p></li>
<li><p>Announce the release to the community</p></li>
</ul>
<p>ğŸ”— <a class="reference internal" href="deploying_shared_spack.html"><span class="std std-doc">Read more</span></a></p>
</section>
<hr class="docutils" />
<section id="maintaining-past-versions">
<h2>7. Maintaining Past Versions<a class="headerlink" href="#maintaining-past-versions" title="Link to this heading">ïƒ</a></h2>
<p>Older versions of Polaris sometimes require maintenance (repairs or deletion).</p>
<p>ğŸ”— <a class="reference internal" href="maintaining_past_versions.html"><span class="std std-doc">Read more</span></a></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Updating Shared Spack Environments" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="updating_packages.html" class="btn btn-neutral float-right" title="Updating Spack Dependencies" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Energy Exascale Earth System Model Project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
   

  <!-- Meta tags for JS to use -->
  <meta name="doc-version" content="main">
  <meta name="doc-site-root" content="../../">

  <!-- Create version switcher container -->
  <script>
    const sidebar = document.querySelector('.wy-side-nav-search');
    if (sidebar) {
      const versionDiv = document.createElement('div');
      versionDiv.id = 'version-switcher';
      versionDiv.style.marginTop = '1em';
      sidebar.appendChild(versionDiv);
    }
  </script>

  <!-- Load version-switcher.js using the correct relative path -->
  <script src="../../../shared/version-switcher.js"></script>


</body>
</html>