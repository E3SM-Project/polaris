

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Components</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=a8da1a53"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Categories of tasks" href="categories_of_tasks.html" />
    <link rel="prev" title="Directory structure" href="directories.html" />
    <link href="../../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Polaris
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User's guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../users_guide/quick_start.html">Quick Start for Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users_guide/tasks.html">Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users_guide/config_files.html">Config Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users_guide/suites.html">Suites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users_guide/mesh/index.html">Mesh component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users_guide/ocean/index.html">Ocean component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users_guide/seaice/index.html">Sea ice component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users_guide/machines/index.html">Machines</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer's guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quick_start.html">Quick Start for Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../command_line.html">Command-line interface</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Organization of Tasks</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="directories.html">Directory structure</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Components</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#adding-tasks-to-a-component">Adding Tasks to a Component</a></li>
<li class="toctree-l3"><a class="reference internal" href="#config-file">Config File</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="categories_of_tasks.html">Categories of tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="tasks.html">Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="steps.html">Steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="suites.html">Suites</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../e3sm/init/index.html">E3SM initial condition (e3sm/init) component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mesh/index.html">Mesh component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ocean/index.html">Ocean component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../seaice/index.html">Sea ice component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../framework/index.html">Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../machines/index.html">Machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../building_docs.html">Building the Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../building_docs.html#previewing-the-documentation">Previewing the Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploying_spack.html">Deploying a new spack environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../design_docs/index.html">Design Documents</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/dev_add_test_group.html">Developer Tutorial: Adding a new test group</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Glossary</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Polaris</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Organization of Tasks</a></li>
      <li class="breadcrumb-item active">Components</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/developers_guide/organization/components.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="components">
<span id="dev-components"></span><h1>Components<a class="headerlink" href="#components" title="Link to this heading"></a></h1>
<p>Currently, there are three components: <code class="docutils literal notranslate"><span class="pre">mesh</span></code>, which includes tasks and steps
for making MPAS meshes; <code class="docutils literal notranslate"><span class="pre">ocean</span></code>, which encompasses all the tasks
for MPAS-Ocean and Omega; and <code class="docutils literal notranslate"><span class="pre">seaice</span></code>, which implements tasks for MPAS-Seaice.</p>
<p>From a developer’s perspective, a component is a package within polaris
that has three major pieces:</p>
<ol class="arabic simple">
<li><p>A <code class="docutils literal notranslate"><span class="pre">polaris.tasks.&lt;component&gt;</span></code> package, which contains packages for
individual tasks and their steps, possibly within subpackages that help to
organize them into broader categories.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">polaris.&lt;component&gt;</span></code> package, which contains shared framework code and
other files (e.g., config files, YAML files for model config options) that
are expected to be used only by modules and packages within the component,
not by other components or the main polaris <a class="reference internal" href="../framework/index.html#dev-framework"><span class="std std-ref">Framework</span></a>.</p></li>
<li><p>Optionally, a <code class="docutils literal notranslate"><span class="pre">&lt;component&gt;.cfg</span></code> config file containing default config
options that are universal to all tasks of the component.</p></li>
</ol>
<p>Each component object is either an instance of the
<a class="reference internal" href="../generated/polaris.Component.html#polaris.Component" title="polaris.Component"><code class="xref py py-class docutils literal notranslate"><span class="pre">polaris.Component</span></code></a> class or of a child class that descends from this
class.</p>
<section id="adding-tasks-to-a-component">
<h2>Adding Tasks to a Component<a class="headerlink" href="#adding-tasks-to-a-component" title="Link to this heading"></a></h2>
<p>Tasks are added to a component using the <code class="docutils literal notranslate"><span class="pre">polaris.tasks.add_tasks</span></code> module.
Each component has an <code class="docutils literal notranslate"><span class="pre">add_&lt;component&gt;_tasks()</span></code> function in this module that
adds the tasks to the component. This approach avoids circular imports in
Python. For example, the <code class="docutils literal notranslate"><span class="pre">add_ocean_tasks()</span></code> function for the <code class="docutils literal notranslate"><span class="pre">ocean</span></code> component
might look like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">polaris.tasks.ocean.baroclinic_channel</span><span class="w"> </span><span class="kn">import</span> <span class="n">add_baroclinic_channel_tasks</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">polaris.tasks.ocean.cosine_bell</span><span class="w"> </span><span class="kn">import</span> <span class="n">add_cosine_bell_tasks</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">polaris.tasks.ocean.inertial_gravity_wave</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">add_inertial_gravity_wave_tasks</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">polaris.tasks.ocean.manufactured_solution</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">add_manufactured_solution_tasks</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">polaris.tasks.ocean.single_column</span><span class="w"> </span><span class="kn">import</span> <span class="n">add_single_column_tasks</span>


<span class="k">def</span><span class="w"> </span><span class="nf">add_ocean_tasks</span><span class="p">(</span><span class="n">component</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add tasks to the ocean component.</span>

<span class="sd">    component : polaris.Component</span>
<span class="sd">        The ocean component to which tasks will be added.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># please keep these in alphabetical order</span>
    <span class="n">add_baroclinic_channel_tasks</span><span class="p">(</span><span class="n">component</span><span class="o">=</span><span class="n">component</span><span class="p">)</span>
    <span class="n">add_cosine_bell_tasks</span><span class="p">(</span><span class="n">component</span><span class="o">=</span><span class="n">component</span><span class="p">)</span>
    <span class="n">add_inertial_gravity_wave_tasks</span><span class="p">(</span><span class="n">component</span><span class="o">=</span><span class="n">component</span><span class="p">)</span>
    <span class="n">add_manufactured_solution_tasks</span><span class="p">(</span><span class="n">component</span><span class="o">=</span><span class="n">component</span><span class="p">)</span>
    <span class="n">add_single_column_tasks</span><span class="p">(</span><span class="n">component</span><span class="o">=</span><span class="n">component</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">add_&lt;component&gt;_tasks()</span></code> must then be added, along with the component
itself, to <code class="docutils literal notranslate"><span class="pre">polaris/tasks/__init__.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">List</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">polaris</span><span class="w"> </span><span class="kn">import</span> <span class="n">Component</span>

<span class="c1"># import new components here</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">polaris.tasks.mesh</span><span class="w"> </span><span class="kn">import</span> <span class="n">mesh</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">polaris.tasks.mesh.add_tasks</span><span class="w"> </span><span class="kn">import</span> <span class="n">add_mesh_tasks</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">polaris.tasks.ocean</span><span class="w"> </span><span class="kn">import</span> <span class="n">ocean</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">polaris.tasks.ocean.add_tasks</span><span class="w"> </span><span class="kn">import</span> <span class="n">add_ocean_tasks</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">polaris.tasks.seaice</span><span class="w"> </span><span class="kn">import</span> <span class="n">seaice</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">polaris.tasks.seaice.add_tasks</span><span class="w"> </span><span class="kn">import</span> <span class="n">add_seaice_tasks</span>

<span class="c1"># Add new components alphabetically to this list</span>
<span class="n">_components</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Component</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">mesh</span><span class="p">,</span>
    <span class="n">ocean</span><span class="p">,</span>
    <span class="n">seaice</span><span class="p">,</span>
<span class="p">]</span>

<span class="n">_tasks_added</span> <span class="o">=</span> <span class="kc">False</span>


<span class="k">def</span><span class="w"> </span><span class="nf">get_components</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add all tasks to the Polaris components</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_tasks_added</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">_tasks_added</span><span class="p">:</span>
        <span class="c1"># add tasks to each component</span>
        <span class="n">add_mesh_tasks</span><span class="p">(</span><span class="n">component</span><span class="o">=</span><span class="n">mesh</span><span class="p">)</span>
        <span class="n">add_ocean_tasks</span><span class="p">(</span><span class="n">component</span><span class="o">=</span><span class="n">ocean</span><span class="p">)</span>
        <span class="n">add_seaice_tasks</span><span class="p">(</span><span class="n">component</span><span class="o">=</span><span class="n">seaice</span><span class="p">)</span>

        <span class="n">_tasks_added</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">return</span> <span class="n">_components</span>
</pre></div>
</div>
</section>
<section id="config-file">
<h2>Config File<a class="headerlink" href="#config-file" title="Link to this heading"></a></h2>
<p>A <code class="docutils literal notranslate"><span class="pre">&lt;component&gt;.cfg</span></code> config file is optional. If present, it typically defines
default paths and options for the component. For example, it might define the
default path to the component’s executable and the default namelist and streams
files for “forward mode” (and, for MPAS-Ocean, “init mode”):</p>
<div class="highlight-cfg notranslate"><div class="highlight"><pre><span></span><span class="c1"># This config file has default config options for the landice core</span>

<span class="c1"># The paths section points polaris to external paths</span>
<span class="k">[paths]</span>

<span class="c1"># the relative or absolute path to the root of a branch where MALI has been</span>
<span class="c1"># built</span>
<span class="na">component_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">e3sm_submodules/MALI-Dev/components/mpas-albany-landice</span>

<span class="c1"># The namelists section defines paths to example_compact namelists that will be used</span>
<span class="c1"># to generate specific namelists. By default, these point to the forward and</span>
<span class="c1"># init namelists in the default_inputs directory after a successful build of</span>
<span class="c1"># the landice model. Change these in a custom config file if you need a different</span>
<span class="c1"># example_compact.</span>
<span class="k">[namelists]</span>
<span class="na">forward</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">${paths:component_path}/default_inputs/namelist.landice</span>

<span class="c1"># The streams section defines paths to example_compact streams files that will be used</span>
<span class="c1"># to generate specific streams files. By default, these point to the forward and</span>
<span class="c1"># init streams files in the default_inputs directory after a successful build of</span>
<span class="c1"># the landice model. Change these in a custom config file if you need a different</span>
<span class="c1"># example_compact.</span>
<span class="k">[streams]</span>
<span class="na">forward</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">${paths:component_path}/default_inputs/streams.landice</span>


<span class="c1"># The executables section defines paths to required executables. These</span>
<span class="c1"># executables are provided for use by specific tasks. Most tools that</span>
<span class="c1"># polaris needs should be in the conda environment, so this is only the path</span>
<span class="c1"># to the MALI executable by default.</span>
<span class="k">[executables]</span>
<span class="na">component</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">${paths:component_path}/landice_model</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="directories.html" class="btn btn-neutral float-left" title="Directory structure" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="categories_of_tasks.html" class="btn btn-neutral float-right" title="Categories of tasks" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Energy Exascale Earth System Model Project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
   

  <!-- Meta tags for JS to use -->
  <meta name="doc-version" content="main">
  <meta name="doc-site-root" content="../../">

  <!-- Create version switcher container -->
  <script>
    const sidebar = document.querySelector('.wy-side-nav-search');
    if (sidebar) {
      const versionDiv = document.createElement('div');
      versionDiv.id = 'version-switcher';
      versionDiv.style.marginTop = '1em';
      sidebar.appendChild(versionDiv);
    }
  </script>

  <!-- Load version-switcher.js using the correct relative path -->
  <script src="../../../shared/version-switcher.js"></script>


</body>
</html>