<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Building the Documentation" href="building_docs.html" />
    <link rel="prev" title="Troubleshooting" href="troubleshooting.html" />
    <link href="../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Polaris
          </a>
              <div class="version">
                0.4.0-alpha.2
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User's guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../users_guide/quick_start.html">Quick Start for Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users_guide/tasks.html">Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users_guide/config_files.html">Config Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users_guide/suites.html">Suites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users_guide/ocean/index.html">Ocean component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users_guide/seaice/index.html">Sea ice component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../users_guide/machines/index.html">Machines</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer's guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quick_start.html">Quick Start for Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="command_line.html">Command-line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="organization/index.html">Organization of Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="ocean/index.html">Ocean component</a></li>
<li class="toctree-l1"><a class="reference internal" href="seaice/index.html">SeaIce component</a></li>
<li class="toctree-l1"><a class="reference internal" href="framework/index.html">Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="machines/index.html">Machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#docstrings">Docstrings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="building_docs.html">Building the Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="deploying_spack.html">Deploying a new spack environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design_docs/index.html">Design Documents</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/dev_add_test_group.html">Developer Tutorial: Adding a new test group</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Glossary</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Polaris</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Documentation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/developers_guide/docs.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="documentation">
<span id="dev-docs"></span><h1>Documentation<a class="headerlink" href="#documentation" title="Permalink to this heading"></a></h1>
<p>The polaris documentation is generated using the
<a class="reference external" href="https://www.sphinx-doc.org/en/master/">Sphinx</a> package and is written in
<a class="reference external" href="https://myst-parser.readthedocs.io/en/latest/syntax/syntax.html">MyST</a>
format.  We recommend these <a class="reference external" href="https://myst-parser.readthedocs.io/en/latest/syntax/roles-and-directives.html#roles-directives">basic tips</a>
on using MyST in Sphinx.</p>
<p>Another easy way to get started is by taking a look at the existing source
code for the documentation: <a class="reference external" href="https://github.com/E3SM-Project/polaris/tree/main/docs/">https://github.com/E3SM-Project/polaris/tree/main/docs/</a></p>
<p>Each time you add a component or task, the corresponding
documentation must be included with the pull request to add the code.  This
includes documentation for both the User’s Guide and the Developer’s Guide.
For examples, see:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../users_guide/ocean/index.html#ocean"><span class="std std-ref">Ocean component</span></a> in the User’s Guide</p></li>
<li><p><a class="reference internal" href="../users_guide/ocean/tasks/baroclinic_channel.html#ocean-baroclinic-channel"><span class="std std-ref">baroclinic channel</span></a> tasks in the User’s Guide</p></li>
<li><p><a class="reference internal" href="ocean/index.html#dev-ocean"><span class="std std-ref">Ocean component</span></a> in the Developer’s Guide</p></li>
<li><p><a class="reference internal" href="ocean/tasks/baroclinic_channel.html#dev-ocean-baroclinic-channel"><span class="std std-ref">baroclinic_channel</span></a> tasks in the Developer’s Guide</p></li>
</ul>
<p>Documentation for each component in the User’s guide should include a label
with the name of the component:</p>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span>(ocean)=

<span class="gh"># Ocean</span>
...
</pre></div>
</div>
<p>In the Developer’s Guide, labels have <code class="docutils literal notranslate"><span class="pre">dev-</span></code> prepended to them:</p>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span>(dev-ocean)=

<span class="gh"># Ocean component</span>
...
</pre></div>
</div>
<p>Each category of tasks (e.g. baroclinic channel) should have its own page in
the <code class="docutils literal notranslate"><span class="pre">tasks</span></code> subdirectory of the component. The label for the page should have
have the component name prepended (to make sure it’s unique), and each task
(if explicitly labeled) should have the component and category of tasks
prepended to it. Thus, in the User’s guide, we have:</p>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span>(ocean-baroclinic-channel)=

<span class="gh"># baroclinic_channel</span>

...

(ocean-baroclinic-channel-default)=

<span class="gu">## default</span>

...
</pre></div>
</div>
<p>And in the Developer’s guide, these become:</p>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span>(dev-ocean-baroclinic-channel)=

<span class="gh"># baroclinic_channel</span>

...

(dev-ocean-baroclinic-channel-default)=

<span class="gu">## default</span>

...
</pre></div>
</div>
<p>Documentation for a component or task in the User’s Guide
should contain information that is needed for users who set up and run the test
case, including:</p>
<ul class="simple">
<li><p>Documentation for the component itself (if any)</p></li>
<li><p>A page for each category of tasks with a section for each task:</p>
<ul>
<li><p>A citation or link where the test case that is the basis for the tasks is
defined (if any)</p></li>
<li><p>A brief overview of the common characteristics of the tasks</p></li>
<li><p>An image showing typical output from one of the tasks</p></li>
<li><p>A list of (commented) config options that apply to all tasks</p></li>
<li><p>A (typically brief) description of each task</p></li>
<li><p>The following sections as described in the template: description, mesh,
vertical grid, initial conditions, forcing, time step, config, and cores</p></li>
</ul>
</li>
<li><p>A description of any common framework within the component that the test
group or task pages may need to refer to.  This should only include
framework that users may need to be aware of, e.g. because of
<a class="reference internal" href="../users_guide/config_files.html#config-files"><span class="std std-ref">Config Files</span></a> or namelist options they may wish to edit.</p></li>
<li><p>A description of each suite, including which tasks are included</p></li>
</ul>
<p>A template is available for documenting groups of related tasks in the User’s
Guide: <a class="reference internal" href="../users_guide/ocean/tasks/template.html#ocean-category-of-task"><span class="std std-ref"></span></a></p>
<p>The Developer’s guide for each component should contain:</p>
<ul class="simple">
<li><p>Relevant technical details about development specific to that component</p></li>
<li><p>A page for each category of tasks:</p>
<ul>
<li><p>A description of any development-specific details common to all tasks in
this category</p></li>
<li><p>A description of shared config, namelist and streams files</p></li>
<li><p>A description of shared steps</p></li>
<li><p>A description of any other shared framework code shared between the tasks
in that category</p></li>
<li><p>A description of each task and its steps</p></li>
</ul>
</li>
<li><p>Technical details on the shared framework for the component</p></li>
</ul>
<p>Finally, all functions in the tasks and their shared framework that are part of
the public API (i.e. all functions that don’t start with an underscore) should
be added to <code class="docutils literal notranslate"><span class="pre">docs/&lt;component&gt;/api.md</span></code>:</p>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span><span class="gu">### baroclinic_channel</span>

```{eval-rst}
.. currentmodule:: polaris.ocean.tasks.baroclinic_channel

.. autosummary::
   :toctree: generated/

   add_baroclinic_channel_tasks

   forward.Forward
   forward.Forward.compute_cell_count
   forward.Forward.dynamic_model_config

   init.Init
   init.Init.setup
   init.Init.run

...
```
</pre></div>
</div>
<p>The Developer’s Guide also contains details on the framework shared across
polaris, so any updates to this framework should include relevant additions
or modifications ot the documentation.</p>
<section id="docstrings">
<span id="dev-docstrings"></span><h2>Docstrings<a class="headerlink" href="#docstrings" title="Permalink to this heading"></a></h2>
<p>The Developer’s Guide includes a <a class="reference internal" href="api.html#dev-api"><span class="std std-ref">API reference</span></a> that is automatically generated
from the python code and the <a class="reference external" href="https://www.python.org/dev/peps/pep-0257/">docstrings</a>
at the beginning of each function.  Polaris uses docstrings in the
<a class="reference external" href="https://numpydoc.readthedocs.io/en/latest/format.html">Numpydoc</a> format.
The text is in <a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/basics.html">reStructuredText</a>
format.  A typical example looks like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">compute_land_ice_pressure_and_draft</span><span class="p">(</span><span class="n">ssh</span><span class="p">,</span> <span class="n">modifySSHMask</span><span class="p">,</span> <span class="n">ref_density</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compute the pressure from and overlying ice shelf and the ice-shelf draft</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ssh : xarray.DataArray</span>
<span class="sd">        The sea surface height (the ice draft)</span>

<span class="sd">    modifySSHMask : xarray.DataArray</span>
<span class="sd">        A mask that is 1 where ``landIcePressure`` can be deviate from 0</span>

<span class="sd">    ref_density : float</span>
<span class="sd">        A reference density for seawater displaced by the ice shelf</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    landIcePressure : xarray.DataArray</span>
<span class="sd">        The pressure from the overlying land ice on the ocean</span>

<span class="sd">    landIceDraft : xarray.DataArray</span>
<span class="sd">        The ice draft, equal to the initial ``ssh``</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>The docstring must include a brief description of the function.  Then, it
includes a <code class="docutils literal notranslate"><span class="pre">Parameters</span></code> section with entries for each argument.  The argument
are always given on their own line with the type, separated by <code class="docutils literal notranslate"><span class="pre">:</span></code> (note
the spaces on either side of the colon).  The type should not be in code format
(i.e. not in double back-quotes) because this interferes with Sphinx’s ability
to link to the documentation for the type.  In the example above, Sphinx will
automatically find the API reference to <code class="docutils literal notranslate"><span class="pre">xarray.DataArray</span></code> within the
<code class="docutils literal notranslate"><span class="pre">xarray</span></code> documentation (which is also written using sphinx).  If an argument
is a keyword argument (i.e. given with <code class="docutils literal notranslate"><span class="pre">arg=value</span></code> in the function
declaration), the type should be followed by <code class="docutils literal notranslate"><span class="pre">,</span> <span class="pre">optional</span></code>, indicating that
the argument will take on a default value if it is not supplied.</p>
<p>On the next lines after the argument and type, indented by 4 spaces, is a brief
description of the argument.  If the argument is optional and the default value
is not obvious (e.g. <code class="docutils literal notranslate"><span class="pre">arg=None</span></code> is used as an indication that <code class="docutils literal notranslate"><span class="pre">arg</span></code> will be
replaced by something else in the function), it should also be described. If
the default value of the argument is obvious in the function declaration (e.g.
<code class="docutils literal notranslate"><span class="pre">arg=True</span></code>), no further description is necessary.</p>
<p>Finally, if the function returns values, these need to be described in the same
way as the parameters, with the name of the return values followed by a colon
and the type, then a description, indented by 4 spaces.</p>
<p>Other sections such as <code class="docutils literal notranslate"><span class="pre">Raises</span></code> and <code class="docutils literal notranslate"><span class="pre">Examples</span></code> are optional.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="troubleshooting.html" class="btn btn-neutral float-left" title="Troubleshooting" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="building_docs.html" class="btn btn-neutral float-right" title="Building the Documentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Energy Exascale Earth System Model Project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: main
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Branches</dt>
      <dd><a href="docs.html">main</a></dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>