<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Model</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Provenance" href="provenance.html" />
    <link rel="prev" title="Mesh" href="mesh.html" />
    <link href="../../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Polaris
          </a>
              <div class="version">
                0.1.0-alpha.3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User's guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../users_guide/quick_start.html">Quick Start for Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users_guide/test_cases.html">Test Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users_guide/config_files.html">Config Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users_guide/test_suites.html">Test Suites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users_guide/ocean/index.html">Ocean component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../users_guide/machines/index.html">Machines</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer's guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quick_start.html">Quick Start for Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../command_line.html">Command-line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../organization/index.html">Organization of Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ocean/index.html">Ocean component</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Framework</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="commands.html">Modules for polaris commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="config.html">Config files</a></li>
<li class="toctree-l2"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="io.html">IO</a></li>
<li class="toctree-l2"><a class="reference internal" href="mesh.html">Mesh</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#running-an-e3sm-component">Running an E3SM component</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#adding-yaml-namelist-and-streams-files">Adding yaml, namelist and streams files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#adding-e3sm-component-as-an-input">Adding E3SM component as an input</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#partitioning-the-mesh">Partitioning the mesh</a></li>
<li class="toctree-l3"><a class="reference internal" href="#updating-pio-namelist-options">Updating PIO namelist options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#making-a-graph-file">Making a graph file</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="provenance.html">Provenance</a></li>
<li class="toctree-l2"><a class="reference internal" href="remapping.html">Remapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="validation.html">Validation</a></li>
<li class="toctree-l2"><a class="reference internal" href="visualization.html">Visualization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../machines/index.html">Machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../building_docs.html">Building the Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../design_docs/index.html">Design Documents</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Glossary</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Polaris</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Framework</a></li>
      <li class="breadcrumb-item active">Model</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/developers_guide/framework/model.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="model">
<span id="dev-model"></span><h1>Model<a class="headerlink" href="#model" title="Permalink to this heading"></a></h1>
<section id="running-an-e3sm-component">
<h2>Running an E3SM component<a class="headerlink" href="#running-an-e3sm-component" title="Permalink to this heading"></a></h2>
<p>Steps that run a standalone build of an E3SM component should descend from the
<a class="reference internal" href="../generated/polaris.ModelStep.html#polaris.ModelStep" title="polaris.ModelStep"><code class="xref py py-class docutils literal notranslate"><span class="pre">polaris.ModelStep</span></code></a> class.</p>
<p>By default (if the attribute <code class="docutils literal notranslate"><span class="pre">update_pio</span> <span class="pre">=</span> <span class="pre">True</span></code>), at runtime, the namelist
options associated with the <a class="reference external" href="https://ncar.github.io/ParallelIO/">PIO library</a>
will automatically be set.  If the <code class="docutils literal notranslate"><span class="pre">make_graph</span> <span class="pre">=</span> <span class="pre">True</span></code>, the mesh will be
partitioned across MPI tasks at runtime.</p>
<p>During construction or by setting attributes directly, you can can provide
non-default names for the graph, namelist and streams files.  At construction
or with the <a class="reference internal" href="../generated/polaris.ModelStep.set_model_resources.html#polaris.ModelStep.set_model_resources" title="polaris.ModelStep.set_model_resources"><code class="xref py py-meth docutils literal notranslate"><span class="pre">polaris.ModelStep.set_model_resources()</span></code></a>
method,  you can set number of tasks, threads, etc. determined from the
<code class="docutils literal notranslate"><span class="pre">ntasks</span></code>, <code class="docutils literal notranslate"><span class="pre">min_tasks</span></code>, <code class="docutils literal notranslate"><span class="pre">cpus_per_task</span></code>, <code class="docutils literal notranslate"><span class="pre">min_cpus_per_task`</span></code> and
<code class="docutils literal notranslate"><span class="pre">openmp_threads</span></code> attributes.  These resources need to be set at construction or
in the  <a class="reference internal" href="../organization/steps.html#dev-step-setup"><span class="std std-ref">setup()</span></a> method (i.e. before calling <a class="reference internal" href="../organization/steps.html#dev-step-run"><span class="std std-ref">run()</span></a>)
so that  the polaris framework  can ensure that the required resources are
available.</p>
<section id="adding-yaml-namelist-and-streams-files">
<span id="dev-step-namelists-and-streams"></span><h3>Adding yaml, namelist and streams files<a class="headerlink" href="#adding-yaml-namelist-and-streams-files" title="Permalink to this heading"></a></h3>
<p>Components, test groups, and test cases can provide yaml config options,
namelist and streams files that are used to replace default model config
options  and streams definitions before the E3SM component gets run.  Namelist
and streams files within the <code class="docutils literal notranslate"><span class="pre">polaris</span></code> package must start with the prefix
<code class="docutils literal notranslate"><span class="pre">namelist.</span></code> and <code class="docutils literal notranslate"><span class="pre">streams.</span></code>,  respectively, to ensure that they are included
when we build the package.  Yaml files must end with <code class="docutils literal notranslate"><span class="pre">.yaml</span></code> or <code class="docutils literal notranslate"><span class="pre">.yml</span></code> for the
same reason.</p>
<p>You can make calls to <a class="reference internal" href="../generated/polaris.ModelStep.add_namelist_file.html#polaris.ModelStep.add_namelist_file" title="polaris.ModelStep.add_namelist_file"><code class="xref py py-meth docutils literal notranslate"><span class="pre">polaris.ModelStep.add_namelist_file()</span></code></a>,
<a class="reference internal" href="../generated/polaris.ModelStep.add_yaml_file.html#polaris.ModelStep.add_yaml_file" title="polaris.ModelStep.add_yaml_file"><code class="xref py py-meth docutils literal notranslate"><span class="pre">polaris.ModelStep.add_yaml_file()</span></code></a>,
<a class="reference internal" href="../generated/polaris.ModelStep.add_model_config_options.html#polaris.ModelStep.add_model_config_options" title="polaris.ModelStep.add_model_config_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">polaris.ModelStep.add_model_config_options()</span></code></a>  and
<a class="reference internal" href="../generated/polaris.ModelStep.add_streams_file.html#polaris.ModelStep.add_streams_file" title="polaris.ModelStep.add_streams_file"><code class="xref py py-meth docutils literal notranslate"><span class="pre">polaris.ModelStep.add_streams_file()</span></code></a> as described below to indicate
how yaml, namelist and streams file should be built up by modifying the
defaults for the  E3SM component.  The yaml, namelists and streams files
themselves  are generated  automatically (which of these depends on the E3SM
component in question) as part of setting up the test case.</p>
<section id="adding-a-yaml-file">
<span id="dev-step-add-yaml-file"></span><h4>Adding a yaml file<a class="headerlink" href="#adding-a-yaml-file" title="Permalink to this heading"></a></h4>
<p>Typically, a step that runs an E3SM component will include one or more calls
to  <a class="reference internal" href="../generated/polaris.ModelStep.add_namelist_file.html#polaris.ModelStep.add_namelist_file" title="polaris.ModelStep.add_namelist_file"><code class="xref py py-meth docutils literal notranslate"><span class="pre">polaris.ModelStep.add_namelist_file()</span></code></a> or
<a class="reference internal" href="../generated/polaris.ModelStep.add_yaml_file.html#polaris.ModelStep.add_yaml_file" title="polaris.ModelStep.add_yaml_file"><code class="xref py py-meth docutils literal notranslate"><span class="pre">polaris.ModelStep.add_yaml_file()</span></code></a> within the <a class="reference internal" href="../organization/steps.html#dev-step-init"><span class="std std-ref">constructor</span></a>
or <a class="reference internal" href="../organization/steps.html#dev-step-setup"><span class="std std-ref">setup()</span></a> method.  Calling one of these methods simply adds the
file to  a list that will be parsed if and when the step gets set up.  (This
way, it is  safe to add namelist files to a step in init even if that test case
will never  get set up or run.)</p>
<p>The format of the yaml file is a hierarchical list of sections with config
options and values, followed by streams:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">ocean</span><span class="p">:</span>
<span class="w">  </span><span class="nt">run_modes</span><span class="p">:</span>
<span class="w">    </span><span class="nt">config_ocean_run_mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">forward</span>
<span class="w">  </span><span class="nt">time_management</span><span class="p">:</span>
<span class="w">    </span><span class="nt">config_run_duration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0024_00:00:00</span>
<span class="w">  </span><span class="nt">ALE_vertical_grid</span><span class="p">:</span>
<span class="w">    </span><span class="nt">config_vert_coord_movement</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">impermeable_interfaces</span>
<span class="w">  </span><span class="nt">decomposition</span><span class="p">:</span>
<span class="w">    </span><span class="nt">config_block_decomp_file_prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">graph.info.part.</span>
<span class="w">  </span><span class="nt">time_integration</span><span class="p">:</span>
<span class="w">    </span><span class="nt">config_time_integrator</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RK4</span>
<span class="w">  </span>
<span class="w">  </span><span class="nt">streams</span><span class="p">:</span>
<span class="w">    </span><span class="nt">mesh</span><span class="p">:</span>
<span class="w">      </span><span class="nt">filename_template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">init.nc</span>
<span class="w">    </span><span class="nt">input</span><span class="p">:</span>
<span class="w">      </span><span class="nt">filename_template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">init.nc</span>
<span class="w">    </span><span class="nt">restart</span><span class="p">:</span>
<span class="w">      </span><span class="nt">output_interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0030_00:00:00</span>
<span class="w">    </span><span class="nt">output</span><span class="p">:</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">output</span>
<span class="w">      </span><span class="nt">filename_template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">output.nc</span>
<span class="w">      </span><span class="nt">output_interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0024_00:00:00</span>
<span class="w">      </span><span class="nt">clobber_mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">truncate</span>
<span class="w">      </span><span class="nt">reference_time</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0001-01-01_00:00:00</span>
<span class="w">      </span><span class="nt">contents</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tracers</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mesh</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xtime</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">normalVelocity</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">layerThickness</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">refZMid</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">refLayerThickness</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kineticEnergyCell</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">relativeVorticityCell</span>
</pre></div>
</div>
<p>Unlike for namelist files (see below), we require that config options be placed
in appropriate sections both for clarity and because there is no guarantee that
config options must have unique names.</p>
<p>A typical yaml file is added by passing a package where the yaml file
is located and the name of the input yaml file within that package
as arguments to <a class="reference internal" href="../generated/polaris.ModelStep.add_yaml_file.html#polaris.ModelStep.add_yaml_file" title="polaris.ModelStep.add_yaml_file"><code class="xref py py-meth docutils literal notranslate"><span class="pre">polaris.ModelStep.add_yaml_file()</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">add_yaml_file</span><span class="p">(</span><span class="s1">&#39;polaris.ocean.tests.global_convergence.cosine_bell&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;forward.yaml&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Model config values are replaced by the files (or options, see below) in the
sequence they are given.  This way, you can add the model config substitutions
for  the test group first, and then override those with the replacements for
the test case or step.</p>
</section>
<section id="adding-a-namelist-file">
<span id="dev-step-add-namelists-file"></span><h4>Adding a namelist file<a class="headerlink" href="#adding-a-namelist-file" title="Permalink to this heading"></a></h4>
<p>Typically, a step that runs the E3SM component will include one or more calls
to  <a class="reference internal" href="../generated/polaris.ModelStep.add_namelist_file.html#polaris.ModelStep.add_namelist_file" title="polaris.ModelStep.add_namelist_file"><code class="xref py py-meth docutils literal notranslate"><span class="pre">polaris.ModelStep.add_namelist_file()</span></code></a> or
<a class="reference internal" href="../generated/polaris.ModelStep.add_yaml_file.html#polaris.ModelStep.add_yaml_file" title="polaris.ModelStep.add_yaml_file"><code class="xref py py-meth docutils literal notranslate"><span class="pre">polaris.ModelStep.add_yaml_file()</span></code></a> within the <a class="reference internal" href="../organization/steps.html#dev-step-init"><span class="std std-ref">constructor</span></a>
or <a class="reference internal" href="../organization/steps.html#dev-step-setup"><span class="std std-ref">setup()</span></a> method.  Calling this method simply adds the file to
a list that will be parsed if and when the step gets set up.  (This way, it is
safe to add namelist files to a step in init even if that test case will never
get set up or run.)</p>
<p>The format of the namelist file is simply a list of namelist options and
the replacement values:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>config_write_output_on_startup = .false.
config_run_duration = &#39;0000_00:15:00&#39;
config_use_mom_del2 = .true.
config_implicit_bottom_drag_coeff = 1.0e-2
config_use_cvmix_background = .true.
config_cvmix_background_diffusion = 0.0
config_cvmix_background_viscosity = 1.0e-4
</pre></div>
</div>
<p>Since all MPAS namelist options must have unique names, we do not worry about
which specific namelist within the file each belongs to.</p>
<p>A typical namelist file is added by passing a package where the namelist file
is located and the name of the input namelist file within that package
as arguments to <a class="reference internal" href="../generated/polaris.ModelStep.add_namelist_file.html#polaris.ModelStep.add_namelist_file" title="polaris.ModelStep.add_namelist_file"><code class="xref py py-meth docutils literal notranslate"><span class="pre">polaris.ModelStep.add_namelist_file()</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">add_namelist_file</span><span class="p">(</span><span class="s1">&#39;polaris.ocean.tests.baroclinic_channel&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;namelist.forward&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Namelist values are replaced by the files (or options, see below) in the
sequence they are given.  This way, you can add the namelist substitutions for
the test group first, and then override those with the replacements for
the test case or step.</p>
</section>
<section id="adding-model-config-options">
<span id="dev-step-add-model-config-options"></span><h4>Adding model config options<a class="headerlink" href="#adding-model-config-options" title="Permalink to this heading"></a></h4>
<p>Sometimes, it is easier to replace yaml or namelist options (together referred
to as model config options)  using a dictionary within  the code, rather than
a yaml or namelist file.  This is appropriate when there are only 1 or 2
options to  replace (so creating a file seems like overkill) or when the
model config options rely on values that are determined by the code (e.g.
different  values for different resolutions).  Simply create a dictionary
replacements and call <a class="reference internal" href="../generated/polaris.ModelStep.add_model_config_options.html#polaris.ModelStep.add_model_config_options" title="polaris.ModelStep.add_model_config_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">polaris.ModelStep.add_model_config_options()</span></code></a>
either  at init or in the <code class="docutils literal notranslate"><span class="pre">setup()</span></code> method of the step.  These replacements are
parsed, along  with replacements from files, in the order they are added.<br />
Thus, you could add replacements from a model config file for the test group,
test case, or step, then override them with namelist options in a dictionary
for the test case or  step, as in this example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">add_namelist_file</span><span class="p">(</span><span class="s1">&#39;polaris.ocean.tests.baroclinic_channel&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;namelist.forward&#39;</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">add_namelist_file</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;polaris.ocean.tests.baroclinic_channel&#39;</span><span class="p">,</span>
                       <span class="sa">f</span><span class="s1">&#39;namelist.</span><span class="si">{</span><span class="n">step</span><span class="p">[</span><span class="s2">&quot;resolution&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">.forward&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nu</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
    <span class="c1"># update the viscosity to the requested value</span>
    <span class="n">options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;hmix&#39;</span><span class="p">:</span> 
                 <span class="p">{</span><span class="s1">&#39;config_mom_del2&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">nu</span><span class="p">}}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_model_config_options</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
</pre></div>
</div>
<p>Here, we get default options for “forward” steps, then for the resolution of
the test case from namelist files, then update the viscosity <code class="docutils literal notranslate"><span class="pre">nu</span></code>, which is
an option passed in when creating this step.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Model config options can have values of type <code class="docutils literal notranslate"><span class="pre">bool</span></code>, <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code> or <code class="docutils literal notranslate"><span class="pre">str</span></code>,
and are automatically converted to the appropriate type in the yaml or namelist
file.</p>
</div>
</section>
<section id="updating-namelist-or-yaml-options-at-runtime">
<span id="dev-step-update-namelist-options"></span><h4>Updating namelist or yaml options at runtime<a class="headerlink" href="#updating-namelist-or-yaml-options-at-runtime" title="Permalink to this heading"></a></h4>
<p>It is sometimes useful to update namelist options after a namelist has already
been generated as part of setting up.  This typically happens within a step’s
<code class="docutils literal notranslate"><span class="pre">run()</span></code> method for options that cannot be known beforehand, particularly
options related to the number of MPI tasks, CPUs per task, and OpenMP threads.
In such cases, call <code class="xref py py-meth docutils literal notranslate"><span class="pre">polaris.ModelStep.update_namelist_at_runtime()</span></code> or
<code class="xref py py-meth docutils literal notranslate"><span class="pre">polaris.ModelStep.update_yaml_at_runtime()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>

<span class="n">replacements</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;config_pio_num_iotasks&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pio_num_iotasks</span><span class="p">),</span>
                <span class="s1">&#39;config_pio_stride&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pio_stride</span><span class="p">)}</span>

<span class="bp">self</span><span class="o">.</span><span class="n">update_namelist_at_runtime</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">replacements</span><span class="p">,</span> <span class="n">out_name</span><span class="o">=</span><span class="n">namelist</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="adding-a-streams-file">
<span id="dev-step-add-streams-file"></span><h4>Adding a streams file<a class="headerlink" href="#adding-a-streams-file" title="Permalink to this heading"></a></h4>
<p>Streams files are a bit more complicated than namelist files because
streams files are XML documents, requiring some slightly more sophisticated
parsing.</p>
<p>Typically, a step that runs the E3SM component will include one or more calls
to <a class="reference internal" href="../generated/polaris.ModelStep.add_streams_file.html#polaris.ModelStep.add_streams_file" title="polaris.ModelStep.add_streams_file"><code class="xref py py-meth docutils literal notranslate"><span class="pre">polaris.ModelStep.add_streams_file()</span></code></a> within the<br />
<a class="reference internal" href="../organization/steps.html#dev-step-init"><span class="std std-ref">constructor</span></a> or <a class="reference internal" href="../organization/steps.html#dev-step-setup"><span class="std std-ref">setup()</span></a> method.  Calling this function
simply adds the file to a list within the <code class="docutils literal notranslate"><span class="pre">step</span></code> dictionary that will be parsed
if an when the step gets set up.  (This way, it is safe to add streams files to
a step at init even if that test case will never get set up or run.)</p>
<p>The format of the streams file is essentially the same as the default and
generated streams file, e.g.:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;streams&gt;</span>

<span class="nt">&lt;immutable_stream</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;mesh&quot;</span>
<span class="w">                  </span><span class="na">filename_template=</span><span class="s">&quot;init.nc&quot;</span><span class="nt">/&gt;</span>

<span class="nt">&lt;immutable_stream</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;input&quot;</span>
<span class="w">                  </span><span class="na">filename_template=</span><span class="s">&quot;init.nc&quot;</span><span class="nt">/&gt;</span>

<span class="nt">&lt;immutable_stream</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;restart&quot;</span><span class="nt">/&gt;</span>

<span class="nt">&lt;stream</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;output&quot;</span>
<span class="w">        </span><span class="na">type=</span><span class="s">&quot;output&quot;</span>
<span class="w">        </span><span class="na">filename_template=</span><span class="s">&quot;output.nc&quot;</span>
<span class="w">        </span><span class="na">output_interval=</span><span class="s">&quot;0000_00:00:01&quot;</span>
<span class="w">        </span><span class="na">clobber_mode=</span><span class="s">&quot;truncate&quot;</span><span class="nt">&gt;</span>

<span class="w">    </span><span class="nt">&lt;var_struct</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;tracers&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;var</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;xtime&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;var</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;normalVelocity&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;var</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;layerThickness&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/stream&gt;</span>

<span class="nt">&lt;/streams&gt;</span>
</pre></div>
</div>
<p>These are all streams that are already defined in the default forward streams
for MPAS-Ocean, so the defaults will be updated.  If only the attributes of
a stream are given, the contents of the stream (the <code class="docutils literal notranslate"><span class="pre">var</span></code>, <code class="docutils literal notranslate"><span class="pre">var_struct</span></code>
and <code class="docutils literal notranslate"><span class="pre">var_array</span></code> tags within the stream) are taken from the defaults.  If
any contents are given, as for the <code class="docutils literal notranslate"><span class="pre">output</span></code> stream in the example above, they
replace the default contents.  Polaris does not include a way to add or
remove contents from the defaults, just keep the default contents or replace
them all.  (Past experience has shown that such a feature would be
confusing and difficult to keep synchronized with the E3SM code.)</p>
<p>A typical streams file is added by calling
<a class="reference internal" href="../generated/polaris.ModelStep.add_streams_file.html#polaris.ModelStep.add_streams_file" title="polaris.ModelStep.add_streams_file"><code class="xref py py-meth docutils literal notranslate"><span class="pre">polaris.ModelStep.add_streams_file()</span></code></a> with a package where the streams
file is located and the name of the input streams file within that package:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">add_streams_file</span><span class="p">(</span><span class="s1">&#39;polaris.ocean.tests.baroclinic_channel&#39;</span><span class="p">,</span>
                      <span class="s1">&#39;streams.forward&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If the streams file should have a different name than the default
(<code class="docutils literal notranslate"><span class="pre">streams.&lt;component&gt;</span></code>), the name can be given via the <code class="docutils literal notranslate"><span class="pre">out_name</span></code> keyword
argument.   If <code class="docutils literal notranslate"><span class="pre">init</span></code> mode is desired, rather than the default, <code class="docutils literal notranslate"><span class="pre">forward</span></code>
mode, this can also be specified.</p>
</section>
<section id="adding-a-template-streams-file">
<span id="dev-step-add-streams-file-template"></span><h4>Adding a template streams file<a class="headerlink" href="#adding-a-template-streams-file" title="Permalink to this heading"></a></h4>
<p>The main difference between namelists and streams files is that there is no
direct equivalent for streams of <a class="reference internal" href="../generated/polaris.ModelStep.add_model_config_options.html#polaris.ModelStep.add_model_config_options" title="polaris.ModelStep.add_model_config_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">polaris.ModelStep.add_model_config_options()</span></code></a>.
It is simply too confusing to try to define streams within the code.</p>
<p>Instead, <a class="reference internal" href="../generated/polaris.ModelStep.add_streams_file.html#polaris.ModelStep.add_streams_file" title="polaris.ModelStep.add_streams_file"><code class="xref py py-meth docutils literal notranslate"><span class="pre">polaris.ModelStep.add_streams_file()</span></code></a> includes a keyword
argument <code class="docutils literal notranslate"><span class="pre">template_replacements</span></code>.  If you provide a dictionary of
replacements to this argument, the input streams file will be treated as a
<a class="reference external" href="https://jinja.palletsprojects.com/">Jinja2 template</a> that is rendered
using the provided replacements.  Here is an example of such a template streams
file:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;streams&gt;</span>

<span class="nt">&lt;stream</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;output&quot;</span>
<span class="w">        </span><span class="na">output_interval=</span><span class="s">&quot;{{ output_interval }}&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;immutable_stream</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;restart&quot;</span>
<span class="w">                  </span><span class="na">filename_template=</span><span class="s">&quot;../restarts/rst.$Y-$M-$D_$h.$m.$s.nc&quot;</span>
<span class="w">                  </span><span class="na">output_interval=</span><span class="s">&quot;{{ restart_interval }}&quot;</span><span class="nt">/&gt;</span>

<span class="nt">&lt;/streams&gt;</span>
</pre></div>
</div>
<p>And here is how it would be added, along with replacements:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">stream_replacements</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;output_interval&#39;</span><span class="p">:</span> <span class="s1">&#39;00-00-01_00:00:00&#39;</span><span class="p">,</span>
    <span class="s1">&#39;restart_interval&#39;</span><span class="p">:</span> <span class="s1">&#39;00-00-01_00:00:00&#39;</span><span class="p">}</span>
<span class="n">add_streams_file</span><span class="p">(</span><span class="n">step</span><span class="p">,</span> <span class="n">module</span><span class="p">,</span> <span class="s1">&#39;streams.template&#39;</span><span class="p">,</span>
                 <span class="n">template_replacements</span><span class="o">=</span><span class="n">stream_replacements</span><span class="p">)</span>

<span class="o">...</span>

<span class="n">stream_replacements</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;output_interval&#39;</span><span class="p">:</span> <span class="s1">&#39;00-00-01_00:00:00&#39;</span><span class="p">,</span>
    <span class="s1">&#39;restart_interval&#39;</span><span class="p">:</span> <span class="s1">&#39;00-00-01_00:00:00&#39;</span><span class="p">}</span>
<span class="n">add_streams_file</span><span class="p">(</span><span class="n">step</span><span class="p">,</span> <span class="n">module</span><span class="p">,</span> <span class="s1">&#39;streams.template&#39;</span><span class="p">,</span>
                 <span class="n">template_replacements</span><span class="o">=</span><span class="n">stream_replacements</span><span class="p">)</span>
</pre></div>
</div>
<p>In this example, taken from
<code class="xref py py-class docutils literal notranslate"><span class="pre">polaris.ocean.tests.global_ocean.mesh.qu240.dynamic_adjustement.QU240DynamicAdjustment</span></code>,
we are creating a series of steps that will be used to perform dynamic
adjustment of the ocean model, each of which might have different durations and
restart intervals.  Rather than creating a streams file for each step of the
spin up, we reuse the same template with just a few appropriate replacements.
Thus, calls to <a class="reference internal" href="../generated/polaris.ModelStep.add_streams_file.html#polaris.ModelStep.add_streams_file" title="polaris.ModelStep.add_streams_file"><code class="xref py py-meth docutils literal notranslate"><span class="pre">polaris.ModelStep.add_streams_file()</span></code></a> with
<code class="docutils literal notranslate"><span class="pre">template_replacements</span></code> are qualitatively similar to namelist calls to
<a class="reference internal" href="../generated/polaris.ModelStep.add_model_config_options.html#polaris.ModelStep.add_model_config_options" title="polaris.ModelStep.add_model_config_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">polaris.ModelStep.add_model_config_options()</span></code></a>.</p>
</section>
<section id="updating-a-streams-file-at-runtime">
<span id="dev-step-update-streams"></span><h4>Updating a streams file at runtime<a class="headerlink" href="#updating-a-streams-file-at-runtime" title="Permalink to this heading"></a></h4>
<p>Just as with namelist options, it is sometimes useful to update streams files
after it has already been generated as part of setting up.  This typically
happens within a step’s <code class="docutils literal notranslate"><span class="pre">run()</span></code> method for properties of the stream that
may be affected by config options that a user may have changed.  In such
cases, call <code class="xref py py-meth docutils literal notranslate"><span class="pre">polaris.Step.update_streams_at_runtime()</span></code>.  In this
fairly complicated example, the duration of the run in hours is a config option
that we turn into a string.  A dictionary of replacements together with a
template streams file, as described above, are used to update the streams file
with the new run duration:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>
<span class="o">...</span>

<span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span>
<span class="c1"># the duration (hours) of the run</span>
<span class="n">duration</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mi">3600</span> <span class="o">*</span> <span class="n">config</span><span class="o">.</span><span class="n">getfloat</span><span class="p">(</span><span class="s1">&#39;planar_convergence&#39;</span><span class="p">,</span> <span class="s1">&#39;duration&#39;</span><span class="p">))</span>
<span class="n">delta</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="n">duration</span><span class="p">)</span>
<span class="n">hours</span> <span class="o">=</span> <span class="n">delta</span><span class="o">.</span><span class="n">seconds</span><span class="o">//</span><span class="mi">3600</span>
<span class="n">minutes</span> <span class="o">=</span> <span class="n">delta</span><span class="o">.</span><span class="n">seconds</span><span class="o">//</span><span class="mi">60</span> <span class="o">%</span> <span class="mi">60</span>
<span class="n">seconds</span> <span class="o">=</span> <span class="n">delta</span><span class="o">.</span><span class="n">seconds</span> <span class="o">%</span> <span class="mi">60</span>
<span class="n">duration</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">delta</span><span class="o">.</span><span class="n">days</span><span class="si">:</span><span class="s1">03d</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">hours</span><span class="si">:</span><span class="s1">02d</span><span class="si">}</span><span class="s1">:</span><span class="si">{</span><span class="n">minutes</span><span class="si">:</span><span class="s1">02d</span><span class="si">}</span><span class="s1">:</span><span class="si">{</span><span class="n">seconds</span><span class="si">:</span><span class="s1">02d</span><span class="si">}</span><span class="s1">&#39;</span>

<span class="n">stream_replacements</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;output_interval&#39;</span><span class="p">:</span> <span class="n">duration</span><span class="p">}</span>

<span class="bp">self</span><span class="o">.</span><span class="n">update_streams_at_runtime</span><span class="p">(</span>
    <span class="s1">&#39;polaris.ocean.tests.planar_convergence&#39;</span><span class="p">,</span>
    <span class="s1">&#39;streams.template&#39;</span><span class="p">,</span> <span class="n">template_replacements</span><span class="o">=</span><span class="n">stream_replacements</span><span class="p">,</span>
    <span class="n">out_name</span><span class="o">=</span><span class="s1">&#39;streams.ocean&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="adding-e3sm-component-as-an-input">
<h3>Adding E3SM component as an input<a class="headerlink" href="#adding-e3sm-component-as-an-input" title="Permalink to this heading"></a></h3>
<p>If a step involves running the E3SM component, it should descend from
:py:class<code class="docutils literal notranslate"><span class="pre">polaris.ModelStep</span></code>.  The model executable will  automatically be
linked and added as an input to the step.  This way, if the user has forgotten
to compile the model, this will be obvious by the broken symlink and the step
will immediately fail because of the missing input.  The path to the executable
is automatically detected based on the work directory for the step and the
config options.</p>
</section>
</section>
<section id="partitioning-the-mesh">
<h2>Partitioning the mesh<a class="headerlink" href="#partitioning-the-mesh" title="Permalink to this heading"></a></h2>
<p>The method <a class="reference internal" href="../generated/polaris.ModelStep.partition.html#polaris.ModelStep.partition" title="polaris.ModelStep.partition"><code class="xref py py-meth docutils literal notranslate"><span class="pre">polaris.ModelStep.partition()</span></code></a> calls the graph
partitioning  executable (<a class="reference external" href="https://arc.vt.edu/userguide/metis/">gpmetis</a> by
default) to  divide up the MPAS mesh across MPI tasks.  If you create a
<code class="docutils literal notranslate"><span class="pre">ModelStep</span></code> with <code class="docutils literal notranslate"><span class="pre">partition_graph=True</span></code> (the default), this method is called
automatically.</p>
<p>In some circumstances, a step may need to partition the mesh separately from
running the model.  Typically, this applies to cases where the model is run
multiple times with the same partition and we don’t want to waste time
creating the same partition over and over.  For such cases, you can
provide <code class="docutils literal notranslate"><span class="pre">partition_graph=False</span></code> and then call
<a class="reference internal" href="../generated/polaris.ModelStep.partition.html#polaris.ModelStep.partition" title="polaris.ModelStep.partition"><code class="xref py py-meth docutils literal notranslate"><span class="pre">polaris.ModelStep.partition()</span></code></a> manually where appropriate.</p>
</section>
<section id="updating-pio-namelist-options">
<h2>Updating PIO namelist options<a class="headerlink" href="#updating-pio-namelist-options" title="Permalink to this heading"></a></h2>
<p>You can use <a class="reference internal" href="../generated/polaris.ModelStep.update_namelist_pio.html#polaris.ModelStep.update_namelist_pio" title="polaris.ModelStep.update_namelist_pio"><code class="xref py py-meth docutils literal notranslate"><span class="pre">polaris.ModelStep.update_namelist_pio()</span></code></a> to
automatically set  the MPAS namelist options <code class="docutils literal notranslate"><span class="pre">config_pio_num_iotasks</span></code> and
<code class="docutils literal notranslate"><span class="pre">config_pio_stride</span></code> such that there is 1 PIO task per node of the MPAS run.<br />
This is particularly useful for PIO v1, which we have found performs much
better in this  configuration than when there is 1 PIO task per core, the MPAS
default.  When running with PIO v2, we have found little performance difference
between the MPAS default and the polaris default of one task per node, so we
feel this is a safe default.</p>
<p>By default, this function is called in
<a class="reference internal" href="../generated/polaris.ModelStep.runtime_setup.html#polaris.ModelStep.runtime_setup" title="polaris.ModelStep.runtime_setup"><code class="xref py py-meth docutils literal notranslate"><span class="pre">polaris.ModelStep.runtime_setup()</span></code></a>.  If the same namelist
file is used for multiple model runs, it may be useful to update the number of
PIO tasks only once.  In this case, set the attribute <code class="docutils literal notranslate"><span class="pre">update_pio</span> <span class="pre">=</span> <span class="pre">False</span></code> and
<a class="reference internal" href="../generated/polaris.ModelStep.update_namelist_pio.html#polaris.ModelStep.update_namelist_pio" title="polaris.ModelStep.update_namelist_pio"><code class="xref py py-meth docutils literal notranslate"><span class="pre">polaris.ModelStep.update_namelist_pio()</span></code></a> yourself.</p>
<p>If you wish to use the MPAS default behavior of 1 PIO task per core, or wish to
set <code class="docutils literal notranslate"><span class="pre">config_pio_num_iotasks</span></code> and <code class="docutils literal notranslate"><span class="pre">config_pio_stride</span></code> yourself, simply
set <code class="docutils literal notranslate"><span class="pre">update_pio</span> <span class="pre">=</span> <span class="pre">False</span></code>.</p>
</section>
<section id="making-a-graph-file">
<h2>Making a graph file<a class="headerlink" href="#making-a-graph-file" title="Permalink to this heading"></a></h2>
<p>Some polaris test cases take advantage of the fact that the
<a class="reference external" href="http://mpas-dev.github.io/MPAS-Tools/stable/mesh_conversion.html#cell-culler">MPAS-Tools cell culler</a>
can produce a graph file as part of the process of culling cells from an
MPAS mesh.  In test cases that do not require cells to be culled, you can
call <a class="reference internal" href="../generated/polaris.model_step.make_graph_file.html#polaris.model_step.make_graph_file" title="polaris.model_step.make_graph_file"><code class="xref py py-func docutils literal notranslate"><span class="pre">polaris.model_step.make_graph_file()</span></code></a> to produce a graph file
from an MPAS mesh file.  Optionally, you can provide the name of an MPAS field
on cells in the mesh file that gives different weight to different cells
(<code class="docutils literal notranslate"><span class="pre">weight_field</span></code>) in the partitioning process.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="mesh.html" class="btn btn-neutral float-left" title="Mesh" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="provenance.html" class="btn btn-neutral float-right" title="Provenance" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Energy Exascale Earth System Model Project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: main
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Branches</dt>
      <dd><a href="model.html">main</a></dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>