<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>rotation_2d</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css" />

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="single_column" href="single_column.html" />
    <link rel="prev" title="nondivergent_2d" href="nondivergent_2d.html" />
    <link href="../../../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Polaris
          </a>
              <div class="version">
                0.4.0-alpha.2
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User's guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../users_guide/quick_start.html">Quick Start for Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../users_guide/tasks.html">Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../users_guide/config_files.html">Config Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../users_guide/suites.html">Suites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../users_guide/ocean/index.html">Ocean component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../users_guide/seaice/index.html">Sea ice component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../users_guide/machines/index.html">Machines</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer's guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../quick_start.html">Quick Start for Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../command_line.html">Command-line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../organization/index.html">Organization of Tasks</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Ocean component</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Tasks</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="baroclinic_channel.html">baroclinic_channel</a></li>
<li class="toctree-l3"><a class="reference internal" href="correlated_tracers_2d.html">correlated_tracers_2d</a></li>
<li class="toctree-l3"><a class="reference internal" href="cosine_bell.html">cosine_bell</a></li>
<li class="toctree-l3"><a class="reference internal" href="geostrophic.html">geostrophic</a></li>
<li class="toctree-l3"><a class="reference internal" href="divergent_2d.html">divergent_2d</a></li>
<li class="toctree-l3"><a class="reference internal" href="ice_shelf_2d.html">ice_shelf_2d</a></li>
<li class="toctree-l3"><a class="reference internal" href="inertial_gravity_wave.html">inertial_gravity_wave</a></li>
<li class="toctree-l3"><a class="reference internal" href="internal_wave.html">internal_wave</a></li>
<li class="toctree-l3"><a class="reference internal" href="manufactured_solution.html">manufactured_solution</a></li>
<li class="toctree-l3"><a class="reference internal" href="nondivergent_2d.html">nondivergent_2d</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">rotation_2d</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#framework">framework</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="single_column.html">single_column</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../framework.html">Ocean framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../models/index.html">Models</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../seaice/index.html">SeaIce component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../framework/index.html">Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../machines/index.html">Machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docs.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../building_docs.html">Building the Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deploying_spack.html">Deploying a new spack environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../design_docs/index.html">Design Documents</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/dev_add_test_group.html">Developer Tutorial: Adding a new test group</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Glossary</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Polaris</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Ocean component</a></li>
          <li class="breadcrumb-item"><a href="index.html">Tasks</a></li>
      <li class="breadcrumb-item active">rotation_2d</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/developers_guide/ocean/tasks/rotation_2d.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="rotation-2d">
<span id="dev-ocean-rotation-2d"></span><h1>rotation_2d<a class="headerlink" href="#rotation-2d" title="Permalink to this heading"></a></h1>
<p>The <a class="reference internal" href="../generated/polaris.ocean.tasks.sphere_transport.SphereTransport.html#polaris.ocean.tasks.sphere_transport.SphereTransport" title="polaris.ocean.tasks.sphere_transport.SphereTransport"><code class="xref py py-class docutils literal notranslate"><span class="pre">polaris.ocean.tasks.sphere_transport.SphereTransport</span></code></a>
<code class="docutils literal notranslate"><span class="pre">rotation_2d</span></code> test performs a 12-day run on the sphere that has a flow with
a constant rotation rate which affects tracer distributions. The resolution of
the sphere varies (by default, between 60 and 240 km). After one period, the
tracer distributions are compared the initial condition to evaluate numerical
errors associated with the horizontal advection scheme and determine the rate
of convergence.</p>
<section id="framework">
<h2>framework<a class="headerlink" href="#framework" title="Permalink to this heading"></a></h2>
<p>The config options for the <code class="docutils literal notranslate"><span class="pre">rotation_2d</span></code> test is described in
<a class="reference internal" href="../../../users_guide/ocean/tasks/rotation_2d.html#ocean-rotation-2d"><span class="std std-ref">rotation 2-d</span></a> in the User’s Guide.</p>
<p>Additionally, the test uses a <code class="docutils literal notranslate"><span class="pre">forward.yaml</span></code> file with a few common
model config options related to drag and default horizontal and
vertical momentum and tracer diffusion, as well as defining <code class="docutils literal notranslate"><span class="pre">mesh</span></code>, <code class="docutils literal notranslate"><span class="pre">input</span></code>,
<code class="docutils literal notranslate"><span class="pre">restart</span></code>, and <code class="docutils literal notranslate"><span class="pre">output</span></code> streams.  This file has Jinja templating that is
used to update model config options based on Polaris config options, see
<a class="reference internal" href="../framework.html#dev-ocean-convergence"><span class="std std-ref">Convergence Tests</span></a>.</p>
<section id="base-mesh">
<h3>base_mesh<a class="headerlink" href="#base-mesh" title="Permalink to this heading"></a></h3>
<p>Sphere transport tasks use shared <code class="docutils literal notranslate"><span class="pre">base_mesh</span></code> steps for creating
<a class="reference internal" href="../framework.html#dev-ocean-spherical-meshes"><span class="std std-ref">Quasi-uniform and Icosahedral Spherical Meshes</span></a> at a sequence of resolutions.</p>
</section>
<section id="init">
<h3>init<a class="headerlink" href="#init" title="Permalink to this heading"></a></h3>
<p>The class <a class="reference internal" href="../generated/polaris.ocean.tasks.sphere_transport.init.Init.html#polaris.ocean.tasks.sphere_transport.init.Init" title="polaris.ocean.tasks.sphere_transport.init.Init"><code class="xref py py-class docutils literal notranslate"><span class="pre">polaris.ocean.tasks.sphere_transport.init.Init</span></code></a>
defines a step for setting up the initial state at each resolution. The
initial state is differentiated between <code class="docutils literal notranslate"><span class="pre">rotation_2d</span></code> and the other tests
set up by the class.</p>
</section>
<section id="forward">
<h3>forward<a class="headerlink" href="#forward" title="Permalink to this heading"></a></h3>
<p>The class <a class="reference internal" href="../generated/polaris.ocean.tasks.sphere_transport.forward.Forward.html#polaris.ocean.tasks.sphere_transport.forward.Forward" title="polaris.ocean.tasks.sphere_transport.forward.Forward"><code class="xref py py-class docutils literal notranslate"><span class="pre">polaris.ocean.tasks.sphere_transport.forward.Forward</span></code></a>
descends from <a class="reference internal" href="../generated/polaris.ocean.convergence.spherical.SphericalConvergenceForward.html#polaris.ocean.convergence.spherical.SphericalConvergenceForward" title="polaris.ocean.convergence.spherical.SphericalConvergenceForward"><code class="xref py py-class docutils literal notranslate"><span class="pre">polaris.ocean.convergence.spherical.SphericalConvergenceForward</span></code></a>,
and defines a step for running MPAS-Ocean from an initial condition produced in
an <code class="docutils literal notranslate"><span class="pre">init</span></code> step. See <a class="reference internal" href="../framework.html#dev-ocean-convergence"><span class="std std-ref">Convergence Tests</span></a> for some relevant
discussion of the parent class. The time step is determined from the resolution
based on the <code class="docutils literal notranslate"><span class="pre">dt_per_km</span></code> config option in the <code class="docutils literal notranslate"><span class="pre">[convergence_forward]</span></code>
section.  Other model config options are taken from <code class="docutils literal notranslate"><span class="pre">forward.yaml</span></code>.</p>
</section>
<section id="analysis">
<h3>analysis<a class="headerlink" href="#analysis" title="Permalink to this heading"></a></h3>
<p>The class <a class="reference internal" href="../generated/polaris.ocean.tasks.sphere_transport.analysis.Analysis.html#polaris.ocean.tasks.sphere_transport.analysis.Analysis" title="polaris.ocean.tasks.sphere_transport.analysis.Analysis"><code class="xref py py-class docutils literal notranslate"><span class="pre">polaris.ocean.tasks.sphere_transport.analysis.Analysis</span></code></a>
descends from
<a class="reference internal" href="../generated/polaris.ocean.convergence.ConvergenceAnalysis.html#polaris.ocean.convergence.ConvergenceAnalysis" title="polaris.ocean.convergence.ConvergenceAnalysis"><code class="xref py py-class docutils literal notranslate"><span class="pre">polaris.ocean.convergence.ConvergenceAnalysis</span></code></a>,
and defines a step for computing the error norm (L2) for the results
at each resolution for tracers and layer thickness, saving them in
<code class="docutils literal notranslate"><span class="pre">convergence_*.csv</span></code> and plotting them in <code class="docutils literal notranslate"><span class="pre">convergence_*.png</span></code>.</p>
</section>
<section id="viz">
<h3>viz<a class="headerlink" href="#viz" title="Permalink to this heading"></a></h3>
<p>Visualization step is available only in the <code class="docutils literal notranslate"><span class="pre">rotation_2d/with_viz</span></code>
tasks.  It is not included in the <code class="docutils literal notranslate"><span class="pre">rotation_2d</span></code> in order to keep regression
as fast as possible when visualization isn’t needed.</p>
<p>The class <a class="reference internal" href="../generated/polaris.ocean.tasks.sphere_transport.viz.Viz.html#polaris.ocean.tasks.sphere_transport.viz.Viz" title="polaris.ocean.tasks.sphere_transport.viz.Viz"><code class="xref py py-class docutils literal notranslate"><span class="pre">polaris.ocean.tasks.sphere_transport.viz.Viz</span></code></a>
is a step for plotting the initial and final states of the advection test for
each resolution.  The colormap is controlled by these options:</p>
<div class="highlight-cfg notranslate"><div class="highlight"><pre><span></span><span class="c1"># options for visualization for the sphere transport test case</span>
<span class="k">[sphere_transport_viz_*]</span>

<span class="c1"># colormap options</span>
<span class="c1"># colormap</span>
<span class="na">colormap_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">viridis</span>

<span class="c1"># the type of norm used in the colormap</span>
<span class="na">norm_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">linear</span>

<span class="c1"># colorbar limits</span>
<span class="na">colorbar_limits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0., 1.</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="../../framework/visualization.html#dev-visualization-global"><span class="std std-ref">global lat/lon plots</span></a> for more details.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="nondivergent_2d.html" class="btn btn-neutral float-left" title="nondivergent_2d" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="single_column.html" class="btn btn-neutral float-right" title="single_column" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Energy Exascale Earth System Model Project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: main
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Branches</dt>
      <dd><a href="rotation_2d.html">main</a></dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>