<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>inertial gravity wave</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css" />

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="internal wave" href="internal_wave.html" />
    <link rel="prev" title="divergent 2-d" href="divergent_2d.html" />
    <link href="../../../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Polaris
          </a>
              <div class="version">
                0.2.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User's guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../quick_start.html">Quick Start for Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tasks.html">Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../config_files.html">Config Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../suites.html">Suites</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Ocean component</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Tasks</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="baroclinic_channel.html">baroclinic channel</a></li>
<li class="toctree-l3"><a class="reference internal" href="correlated_tracers_2d.html">correlated tracers 2-d</a></li>
<li class="toctree-l3"><a class="reference internal" href="cosine_bell.html">cosine bell</a></li>
<li class="toctree-l3"><a class="reference internal" href="geostrophic.html">geostrophic</a></li>
<li class="toctree-l3"><a class="reference internal" href="divergent_2d.html">divergent 2-d</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">inertial gravity wave</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#description">description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mesh">mesh</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vertical-grid">vertical grid</a></li>
<li class="toctree-l4"><a class="reference internal" href="#initial-conditions">initial conditions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#forcing">forcing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#time-step-and-run-duration">time step and run duration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#config-options">config options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cores">cores</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="internal_wave.html">internal wave</a></li>
<li class="toctree-l3"><a class="reference internal" href="manufactured_solution.html">manufactured solution</a></li>
<li class="toctree-l3"><a class="reference internal" href="nondivergent_2d.html">nondivergent 2-d</a></li>
<li class="toctree-l3"><a class="reference internal" href="rotation_2d.html">rotation 2-d</a></li>
<li class="toctree-l3"><a class="reference internal" href="single_column.html">single column</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../framework/index.html">Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../suites.html">Suites</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../seaice/index.html">Sea ice component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../machines/index.html">Machines</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer's guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/quick_start.html">Quick Start for Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/command_line.html">Command-line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/organization/index.html">Organization of Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/ocean/index.html">Ocean component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/seaice/index.html">SeaIce component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/framework/index.html">Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/machines/index.html">Machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/docs.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/building_docs.html">Building the Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/deploying_spack.html">Deploying a new spack environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/api.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../design_docs/index.html">Design Documents</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/dev_add_test_group.html">Developer Tutorial: Adding a new test group</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Glossary</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Polaris</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Ocean component</a></li>
          <li class="breadcrumb-item"><a href="index.html">Tasks</a></li>
      <li class="breadcrumb-item active">inertial gravity wave</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/users_guide/ocean/tasks/inertial_gravity_wave.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="inertial-gravity-wave">
<span id="ocean-inertial-gravity-wave"></span><h1>inertial gravity wave<a class="headerlink" href="#inertial-gravity-wave" title="Permalink to this heading"></a></h1>
<p>The inertial gravity wave task implements a test of surface wave
propagation with the rotating, linear shallow water equations on a doubly
periodic domain. This test has an exact solution which is used to
assess the numerical accuracy and convergence of the MPAS-Ocean discretization.
The implementation is from
<a class="reference external" href="https://doi.org/10.22541/essoar.167100170.03833124/v1">Bishnu et al.(2023)</a></p>
<section id="description">
<h2>description<a class="headerlink" href="#description" title="Permalink to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">inertial_gravity_wave</span></code> task runs the inertial gravity wave simulation for 4
different resolutions: 200, 100, 50, and 25 km.</p>
<p>The forward step for each resolution runs the simulation for 10 hours. The
model is configured without vertical advection and mixing. No tracers are enabled
and the pressure gradient used is the gradient of the sea surface height.
Horizontal mixing and bottom friction are also neglected. The nonlinear momentum
terms are not included and the layer thickness equation is linearized.</p>
<p>The analysis step computes the L2-norm of the difference between
the simulated SSH field and the exact solution at the end of the simulation. It
also computes the convergence rate with resolution.</p>
<p>The visualization step produces two plots: the convergence of the L2-norm with
resolution and a plan-view of the simulated, exact, and (simulated-analytical)
SSH fields.</p>
<a class="reference internal image-reference" href="../../../_images/inertial_gravity_wave_comparison.png"><img alt="../../../_images/inertial_gravity_wave_comparison.png" class="align-center" src="../../../_images/inertial_gravity_wave_comparison.png" style="width: 500px;" /></a>
<a class="reference internal image-reference" href="../../../_images/inertial_gravity_wave_convergence.png"><img alt="../../../_images/inertial_gravity_wave_convergence.png" class="align-center" src="../../../_images/inertial_gravity_wave_convergence.png" style="width: 500px;" /></a>
</section>
<section id="mesh">
<h2>mesh<a class="headerlink" href="#mesh" title="Permalink to this heading"></a></h2>
<p>For each resolution, the <code class="docutils literal notranslate"><span class="pre">init</span></code> step generates and planar hexagonal
mesh that is periodic in both the x and y directions.</p>
</section>
<section id="vertical-grid">
<h2>vertical grid<a class="headerlink" href="#vertical-grid" title="Permalink to this heading"></a></h2>
<p>Since this task is a shallow water case, the vertical grid is set to a
single layer configuration.</p>
<div class="highlight-cfg notranslate"><div class="highlight"><pre><span></span><span class="k">[vertical_grid]</span>

<span class="c1"># The type of vertical grid</span>
<span class="na">grid_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">uniform</span>

<span class="c1"># Number of vertical levels</span>
<span class="na">vert_levels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span><span class="w"> </span>

<span class="c1"># Depth of the bottom of the ocean</span>
<span class="na">bottom_depth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1000.0</span>

<span class="c1"># The type of vertical coordinate (e.g. z-level, z-star)</span>
<span class="na">coord_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">z-star</span>

<span class="c1"># Whether to use &quot;partial&quot; or &quot;full&quot;, or &quot;None&quot; to not alter the topography</span>
<span class="na">partial_cell_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">None</span>

<span class="c1"># The minimum fraction of a layer for partial cells</span>
<span class="na">min_pc_fraction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.1</span>
</pre></div>
</div>
</section>
<section id="initial-conditions">
<h2>initial conditions<a class="headerlink" href="#initial-conditions" title="Permalink to this heading"></a></h2>
<p>The initial conditions are set to the exact solution at time <span class="math notranslate nohighlight">\(t=0\)</span>:
<div class="math notranslate nohighlight">
\[\begin{split}
\eta &amp;= \cos(k_x x + k_y y + \omega t) \\
u &amp;= \frac{g}{\omega^2 - f^2} [\omega k_x \cos(k_x x + k_y y - \omega t) - f k_y \sin(k_x x + k_y y - \omega t)]\\
v &amp;= \frac{g}{\omega^2 - f^2} [\omega k_y \cos(k_x x + k_y y - \omega t) - f k_x \sin(k_x x + k_y y - \omega t)]
\end{split}\]</div>
</p>
</section>
<section id="forcing">
<h2>forcing<a class="headerlink" href="#forcing" title="Permalink to this heading"></a></h2>
<p>N/A</p>
</section>
<section id="time-step-and-run-duration">
<h2>time step and run duration<a class="headerlink" href="#time-step-and-run-duration" title="Permalink to this heading"></a></h2>
<p>The time step is determined by the config option <code class="docutils literal notranslate"><span class="pre">dt_per_km</span></code> according to the
mesh resolution. The run duration is 10 hours.</p>
</section>
<section id="config-options">
<h2>config options<a class="headerlink" href="#config-options" title="Permalink to this heading"></a></h2>
<p>The following config options are availiable for this case:</p>
<div class="highlight-cfg notranslate"><div class="highlight"><pre><span></span><span class="k">[inertial_gravity_wave]</span>

<span class="c1"># The size of the domain in km in the x direction, (size in y direction =</span>
<span class="c1"># sqrt(3)/2*lx</span>
<span class="na">lx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">10000</span>

<span class="c1"># The Corilois parameter (constant)</span>
<span class="na">coriolis_parameter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1e-4</span>

<span class="c1"># Amplitude of the ssh initial condition</span>
<span class="na">ssh_amplitude</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1.0</span>

<span class="c1"># Number of wavelengths in x direction</span>
<span class="na">n_wavelengths_x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2</span>

<span class="c1"># Number of wavelengths in y direction</span>
<span class="na">n_wavelengths_y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2</span>

<span class="c1"># Convergence threshold below which the test fails</span>
<span class="na">conv_thresh</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1.8</span>

<span class="c1"># time step per resolution (s/km), since dt is proportional to resolution</span>
<span class="na">dt_per_km</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">3.0</span>
</pre></div>
</div>
</section>
<section id="cores">
<h2>cores<a class="headerlink" href="#cores" title="Permalink to this heading"></a></h2>
<p>The number of cores is determined according to the config options
<code class="docutils literal notranslate"><span class="pre">max_cells_per_core</span></code> and <code class="docutils literal notranslate"><span class="pre">goal_cells_per_core</span></code>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="divergent_2d.html" class="btn btn-neutral float-left" title="divergent 2-d" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="internal_wave.html" class="btn btn-neutral float-right" title="internal wave" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Energy Exascale Earth System Model Project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: main
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Branches</dt>
      <dd><a href="inertial_gravity_wave.html">main</a></dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>