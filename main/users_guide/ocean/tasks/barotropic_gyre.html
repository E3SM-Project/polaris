

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>barotropic gyre</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=557c4a80"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="correlated tracers 2-d" href="correlated_tracers_2d.html" />
    <link rel="prev" title="baroclinic channel" href="baroclinic_channel.html" />
    <link href="../../../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Polaris
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User's guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../quick_start.html">Quick Start for Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tasks.html">Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../config_files.html">Config Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../suites.html">Suites</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Ocean component</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Tasks</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="baroclinic_channel.html">baroclinic channel</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">barotropic gyre</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#description">description</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mesh">mesh</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vertical-grid">vertical grid</a></li>
<li class="toctree-l4"><a class="reference internal" href="#initial-conditions">initial conditions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#forcing">forcing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#supported-models">supported models</a></li>
<li class="toctree-l4"><a class="reference internal" href="#default">default</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="correlated_tracers_2d.html">correlated tracers 2-d</a></li>
<li class="toctree-l3"><a class="reference internal" href="cosine_bell.html">cosine bell</a></li>
<li class="toctree-l3"><a class="reference internal" href="geostrophic.html">geostrophic</a></li>
<li class="toctree-l3"><a class="reference internal" href="divergent_2d.html">divergent 2-d</a></li>
<li class="toctree-l3"><a class="reference internal" href="ice_shelf_2d.html">ice shelf 2d</a></li>
<li class="toctree-l3"><a class="reference internal" href="inertial_gravity_wave.html">inertial gravity wave</a></li>
<li class="toctree-l3"><a class="reference internal" href="internal_wave.html">internal wave</a></li>
<li class="toctree-l3"><a class="reference internal" href="manufactured_solution.html">manufactured solution</a></li>
<li class="toctree-l3"><a class="reference internal" href="nondivergent_2d.html">nondivergent 2-d</a></li>
<li class="toctree-l3"><a class="reference internal" href="rotation_2d.html">rotation 2-d</a></li>
<li class="toctree-l3"><a class="reference internal" href="single_column.html">single column</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../framework/index.html">Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../suites.html">Suites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../suites.html#nightly-suite">nightly suite</a></li>
<li class="toctree-l2"><a class="reference internal" href="../suites.html#omega-pr-suite">omega_pr suite</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../seaice/index.html">Sea ice component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../machines/index.html">Machines</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer's guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/quick_start.html">Quick Start for Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/command_line.html">Command-line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/organization/index.html">Organization of Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/ocean/index.html">Ocean component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/seaice/index.html">SeaIce component</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/framework/index.html">Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/machines/index.html">Machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/docs.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/building_docs.html">Building the Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/deploying_spack.html">Deploying a new spack environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developers_guide/api.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../design_docs/index.html">Design Documents</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/dev_add_test_group.html">Developer Tutorial: Adding a new test group</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Glossary</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Polaris</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Ocean component</a></li>
          <li class="breadcrumb-item"><a href="index.html">Tasks</a></li>
      <li class="breadcrumb-item active">barotropic gyre</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/users_guide/ocean/tasks/barotropic_gyre.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="barotropic-gyre">
<span id="ocean-barotropic-gyre"></span><h1>barotropic gyre<a class="headerlink" href="#barotropic-gyre" title="Link to this heading">ÔÉÅ</a></h1>
<p>The barotropic gyre test case implements the Munk model for a simplified,
wind-driven gyre
(<a class="reference external" href="https://doi.org/10.1175/1520-0469%281950%29007%3C0080:OTWDOC%3E2.0.CO;2">Munk 1950</a>).
It is a variant of the Stommel model except it uses Laplacian horizontal
viscosity rather than drag to balance the wind stress. As such, this test case
may be used to verify the Laplacian viscosity term and the wind stress forcing
term.</p>
<p>The test case is barotropic.</p>
<p>Here, we linearize the momentum equations to permit comparison against an
analytical solution. The nonlinear solution would be a logical extension of
this case and should be qualitatively similar.</p>
<section id="description">
<h2>description<a class="headerlink" href="#description" title="Link to this heading">ÔÉÅ</a></h2>
<p>A successful test shows the development of a western boundary current and
clockwise circulation. The comparison with the analytical solution is performed
via a streamfunction. The L2 norm is printed and the following figure is
produced:</p>
<a class="reference internal image-reference" href="../../../_images/barotropic_gyre_solution.png"><img alt="../../../_images/barotropic_gyre_solution.png" class="align-center" src="../../../_images/barotropic_gyre_solution.png" style="width: 800px;" />
</a>
</section>
<section id="mesh">
<h2>mesh<a class="headerlink" href="#mesh" title="Link to this heading">ÔÉÅ</a></h2>
<p>The mesh is planar with dimensions given by the config options <code class="docutils literal notranslate"><span class="pre">lx</span></code> and <code class="docutils literal notranslate"><span class="pre">ly</span></code>
and the resolution given by the config option <code class="docutils literal notranslate"><span class="pre">resolution</span></code>. The defaults are
1200 km x 1200 km and a resolution of 20 km but different mesh dimensions and
resolutions may be tested. The resolution will be compared with the estimated
lateral boundary layer width to ensure that the western boundary current will
be adequately resolved.</p>
<p>The boundary conditions are non-periodic in both x- and y-dimensions.</p>
</section>
<section id="vertical-grid">
<h2>vertical grid<a class="headerlink" href="#vertical-grid" title="Link to this heading">ÔÉÅ</a></h2>
<p>As this test case is barotropic, the default number of vertical levels is 1.
A different number of vertical levels may be specified by the user. The
bottom topography is flat so this is not a test case for which different
vertical coordinates would be informative.</p>
<div class="highlight-cfg notranslate"><div class="highlight"><pre><span></span><span class="c1"># Options related to the vertical grid</span>
<span class="k">[vertical_grid]</span>

<span class="c1"># The type of vertical grid</span>
<span class="na">grid_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">uniform</span>

<span class="c1"># Number of vertical levels</span>
<span class="na">vert_levels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>

<span class="c1"># Depth of the bottom of the ocean</span>
<span class="na">bottom_depth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">5000.0</span>

<span class="c1"># The type of vertical coordinate (e.g. z-level, z-star)</span>
<span class="na">coord_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">z-star</span>

<span class="c1"># Whether to use &quot;partial&quot; or &quot;full&quot;, or &quot;None&quot; to not alter the topography</span>
<span class="na">partial_cell_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">None</span>

<span class="c1"># The minimum fraction of a layer for partial cells</span>
<span class="na">min_pc_fraction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.1</span>
</pre></div>
</div>
</section>
<section id="initial-conditions">
<h2>initial conditions<a class="headerlink" href="#initial-conditions" title="Link to this heading">ÔÉÅ</a></h2>
<p>The initial condition is at rest. Since the test case is barotropic, only a
reference density is provided with the config option <code class="docutils literal notranslate"><span class="pre">rho_0</span></code>. A beta-plane
is indicated by the coriolis parameter and determined by the config options
<code class="docutils literal notranslate"><span class="pre">f_0</span></code> and <code class="docutils literal notranslate"><span class="pre">beta</span></code>.</p>
</section>
<section id="forcing">
<h2>forcing<a class="headerlink" href="#forcing" title="Link to this heading">ÔÉÅ</a></h2>
<p>This test has a constant wind stress field following:</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\tau_x &amp;= \tau_0 * \cos(\pi \frac{y}{l_y}) \\
\tau_y &amp;= 0
\end{split}\]</div>
<p>where <code class="docutils literal notranslate"><span class="pre">tau_0</span></code> is given by a config option.</p>
<a class="reference internal image-reference" href="../../../_images/barotropic_gyre_forcing.png"><img alt="../../../_images/barotropic_gyre_forcing.png" class="align-center" src="../../../_images/barotropic_gyre_forcing.png" style="width: 500px;" />
</a>
<section id="config-options">
<h3>config options<a class="headerlink" href="#config-options" title="Link to this heading">ÔÉÅ</a></h3>
<div class="highlight-cfg notranslate"><div class="highlight"><pre><span></span><span class="k">[barotropic_gyre]</span>

<span class="c1"># distance in kilometers between cell centers</span>
<span class="na">resolution</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">20</span>

<span class="c1"># Longituidinal domain length in kilometers</span>
<span class="na">lx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1200</span>

<span class="c1"># Latitudinal domain length in kilometers</span>
<span class="na">ly</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1200</span>

<span class="c1"># Maximum amplitude of the zonal wind stress [N m-2]</span>
<span class="na">tau_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.1</span>

<span class="c1"># Horizontal visocity [m2 s-1]</span>
<span class="na">nu_2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">4e2</span>

<span class="c1"># [s-1 m-1]</span>
<span class="na">beta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">10e-11</span>

<span class="c1"># [s-1]</span>
<span class="na">f_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">10e-4</span>

<span class="c1"># homogenous fluid density [kg m-3]</span>
<span class="na">rho_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1000</span>
</pre></div>
</div>
<p>The config option <code class="docutils literal notranslate"><span class="pre">nu_2</span></code> specifies the del2 horizontal viscosity. This value
will be compared against the resolution to check for stability at set-up. All
other config options are explained further in previous sections.</p>
</section>
<section id="cores">
<h3>cores<a class="headerlink" href="#cores" title="Link to this heading">ÔÉÅ</a></h3>
<p>The number of cores is determined by <code class="docutils literal notranslate"><span class="pre">goal_cells_per_core</span></code> and
<code class="docutils literal notranslate"><span class="pre">max_cells_per_core</span></code> in the <code class="docutils literal notranslate"><span class="pre">ocean</span></code> section of the config file.</p>
</section>
</section>
<section id="supported-models">
<span id="ocean-barotropic-gyre-default"></span><h2>supported models<a class="headerlink" href="#supported-models" title="Link to this heading">ÔÉÅ</a></h2>
<p>These tasks support only MPAS-Ocean.</p>
</section>
<section id="default">
<h2>default<a class="headerlink" href="#default" title="Link to this heading">ÔÉÅ</a></h2>
<p>The default case is designed such that only a short forward run is performed.
However, when users set up the default case, a long forward run is also set
up and may be run along with the analysis step to compare the numerical
solution with an analytical solution. The user should change the
<code class="docutils literal notranslate"><span class="pre">barotropic_gyre:</span> <span class="pre">steps_to_run</span></code> config option to include desired steps.</p>
<section id="time-step-and-run-duration">
<h3>time step and run duration<a class="headerlink" href="#time-step-and-run-duration" title="Link to this heading">ÔÉÅ</a></h3>
<p>The time step for forward integration is set as a function of the CFL
condition assuming a maximum velocity of 1 m/s and a function of the coriolis
parameter <code class="docutils literal notranslate"><span class="pre">f_0</span></code>. The stability parameter is set to 0.25 based on the stability
of MPAS-Ocean for this test case.</p>
<p>The run duration is 3 time steps for the <code class="docutils literal notranslate"><span class="pre">short_forward</span></code> step and 3 years for
the <code class="docutils literal notranslate"><span class="pre">long_forward</span></code> step.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="baroclinic_channel.html" class="btn btn-neutral float-left" title="baroclinic channel" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="correlated_tracers_2d.html" class="btn btn-neutral float-right" title="correlated tracers 2-d" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Energy Exascale Earth System Model Project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: main
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Tags</dt>
      <dd><a href="../../../../0.5.0/index.html">0.5.0</a></dd>
    </dl>
    <dl>
      <dt>Branches</dt>
      <dd><a href="barotropic_gyre.html">main</a></dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>